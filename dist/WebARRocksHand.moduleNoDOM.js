/**
 * Copyright (c) 2020 WebAR.rocks ( https://webar.rocks )
 * This code is released under dual licensing:
 *   - GPLv3 
 *   - Nominative commercial license
 * Please read https://github.com/WebAR-rocks/WebAR.rocks.hand/blob/master/LICENSE
 * 
*/

// BEGIN EMULATE DOM

// import some usefull stuffs
try {
  var Buffer = require('buffer').Buffer;
} catch(err) {
  console.log('Cannot import Buffer package');
}

// emulate global variables:
const navigator = {  
  platform: "Linux x86_64",
  userAgent: "forceWebGL1_noAntialiasing_noDOM"
};

const window = {
  canvas: null,
  innnerWidth: -1,
  innerHeight: -1,
  URL: {
    createObjectURL: function() {
      return null
    }
  },
  addEventListener: function() {},
  removeEventListener: function() {},
  requestAnimationFrame: function(step) {
    if (window.canvas === null){
      setTimeout(step, 1);
      return;
    }
    window.canvas.requestAnimationFrame(step)
  },
  cancelAnimationFrame: function(step) {
    if (window.canvas === null){
      return;
    }
    window.canvas.cancelAnimationFrame(step)
  },
  setCanvas: function(c) {
    window.canvas = c;
  }
};

const document = {
  createElement: function(elementType){
    switch(elementType){
      case 'canvas':
        return null; // return a real canvas
    }
  },
  getElementById: function(elementId){
    return null;
  },
  body: { appendChild: function(element){ return null; }}
};

if(typeof(wx) !== 'undefined'){ //WECHAT
  const systemInfo = wx.getSystemInfoSync()
  window.innnerWidth = systemInfo.windowWidth;
  window.innnerHeight = systemInfo.windowHeight;
}

const FAKEDOM = {
  window: window,
  document: document,
  navigator: navigator
};
// END EMULATE DOM


window.WEBARROCKSHAND=function(){function Ub(a){var b=null,d=null,e=null,g=0;this.v=function(n){this.Sf(n.tb);e.He({Bc:n.Bc,xc:n.xc})};this.hf=function(n){return b[n]};this.Sf=function(n){var p=null;g=n.length;b=n.map(function(r,m){r=Object.assign({},r,{index:m,parent:this,zb:p,xf:m===g-1});return p=m=0===m?Vb.instance(r):Wb.instance(r)});d=b[0];e=b[g-1];b.forEach(function(r,m){0!==m&&r.Jf()})};this.V=function(n){var p=n;b.forEach(function(r){p=r.V(p,!1)});return p};this.gf=function(){return d.F()};
this.lf=function(){return e.F()};this.$b=function(){return e.kf()};this.xd=function(){return e.xd()};this.o=function(){b&&(b.forEach(function(n){n.o()}),e=d=b=null,g=0)};"undefined"!==typeof a&&this.v(a)}function mb(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}function Xb(a){var b=JSON.parse(a);a=b.ne;var d=b.nf,e=b.n;var g="undefined"===typeof btoa?Buffer.from(b.data,"base64").toString("latin1"):atob(b.data);var n=g.length;b=new Uint8Array(n);for(var p=0;p<n;++p)b[p]=g.charCodeAt(p);g=new Float32Array(e);
n=new Float32Array(d);p=a+d+1;for(var r=0;r<e;++r){for(var m=p*r,v=0===mb(b,m)?1:-1,B=m+1,D=1,h=0,t=B+a-1;t>=B;--t)h+=D*mb(b,t),D*=2;B=h;m=m+1+a;D=n.length;h=0;for(t=m;t<m+D;++t)n[h]=mb(b,t,!0),++h;for(D=m=0;D<d;++D)m+=n[D]*Math.pow(2,-D-1);g[r]=0===m&&0===B?0:v*(1+m)*Math.pow(2,1+B-Math.pow(2,a-1))}return g}function nb(){ta.splice(0);Na.splice(0);ia.Ab=[];ia.Ic=new Uint8Array(O.m);ia.Qa=new Uint32Array(O.m);ia.Ha=new Uint8Array(O.m);for(var a=0;a<O.m;++a)ta.push(null),Na.push(null),ia.Ab.push(new Int8Array(pa.switchNNConsecutiveIterations))}
function eb(){if(fa===ca.play)return!1;if(null===C.element)return fa=ca.bg,!1;fa=ca.play;Ta.stop();Db();Eb(0);return!0}function ob(){if(fa!==ca.play)return!1;Ta.stop();fa=ca.pause;return!0}function Fa(a,b,d,e,g){a=4*(b*Ba+a)+d;return e+(ra.buffer[a]/255+ra.buffer[a+4*Ba]/65025)*(g-e)}function Db(){xa.ia();V.reset();Y.reset();A.S();A.md();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);V.Ia();A.Ba()}function Yb(){xa.P();c.viewport(0,0,Ba,2*O.m);A.set("s53");ra.Va.g(0);ra.Gb.g(1);V.l(!1,!1);return Z.Cb(0,
0,Ba,2*O.m,ra.buffer)}function Zb(a){var b=pb?Na[a]:ta[a];if(null!==b){var d=Oa[a],e=qb[a],g=qa[a],n=2*a,p=b.Dc;d.Ma=Fa(1,n,1,0,1);g.detected=Ja.za(g.detected,d.Ma,da.re);g.isDetected=g.detected>ka.threshold;g.neuralNetworkInd=b.la;if(g.isDetected){d.x=Fa(0,n,1,-1,1);d.y=Fa(0,n,2,-1,1);d.W=Fa(0,n,3,0,2);d.Ta=Fa(1,n,0,-p,p);var r=Fa(1,n,2,-1,1);p=Fa(1,n,3,-1,1);switch(b.yc){case Wa.Kb:d.Sa=b.va*r;d.Oa=p;break;case Wa.Wc:var m=b.$,v=m&&m.isFlipped;r*=p;d.Sa=m&&m.isRightHand?r:-r;d.Oa=v?p:-p}for(p=0;p<
Ka.sc;++p)m=2+Math.floor(p/2),d.lc[p][0]=b.va*Fa(m,n,p%2*2,-1.2,1.2),d.lc[p][1]=Fa(m,n,p%2*2+1,-1.2,1.2);e.Se=d.x-g.x;e.Te=d.y-g.y;e.Re=d.W-g.s;e.Qe=Q.qa?d.Ta:d.Ta-g.rz;e.Ke=d.Sa-g.rightHand;e.Je=d.Oa-g.flipped;e=Math.pow($b.Bf(pa.qualityFactorRange[0],pa.qualityFactorRange[1],d.Ma),da.se);n=Ja.za(pa.alphaRange[1],pa.alphaRange[0],e);g.quality=e;rb[a]=e<pa.qualityGoodDetectionThreshold?fb.te:fb.rf;g.x=Ja.za(g.x,d.x,n);g.y=Ja.za(g.y,d.y,n);g.s=Ja.za(g.s,d.W,n);g.rightHand=d.Sa;g.flipped=d.Oa;var B=
1,D=0;Q.qa?(B=Math.cos(g.rz),D=Math.sin(g.rz),g.rz+=b.va*Math.max(pa.followZRotAlphaFactorRange[0],pa.followZRotAlphaFactorRange[1]*n)*d.Ta,g.rz>Math.PI&&(g.rz-=2*Math.PI),g.rz<-Math.PI&&(g.rz+=2*Math.PI)):g.rz=Ja.za(g.rz,d.Ta,n);g.isRightHand=0<g.rightHand;g.isFlipped=0<g.flipped;for(var h in b.$)g[h]=b.$[h];g.landmarks.forEach(function(t,w){var l=d.lc[w];w=d.Af[w];var q=l[0];l=l[1];if(Q.qa){var H=l*B+q*D;q=q*B-l*D;l=H}w[0]=d.x+q*d.W;w[1]=d.y+l*d.W*U.Nb;t[0]=w[0];t[1]=w[1]});++d.Aa}else b=g.detected<
ka.thresholdSignal,Q.qa&&(Q.Wb&&b?(g.rz+=1.5*p,g.rz>Math.PI&&(g.rz-=2*Math.PI)):Q.Wb||(g.rz=0)),rb[a]=fb.Rd,d.Aa=Math.floor(d.Aa/2)}}function ac(a,b){var d=ta[a];return ma.find(function(e){if(e===d)return!1;var g=!0,n;for(n in e.$){var p=e.$[n],r=d.$[n];if(n===b||"isFlipped"===n)r=!r;p=p===r;g=(g=g&&p)&&(p||pa.NNSwitchMask[n])}return g})||d}function Eb(){fa===ca.play&&(ka.isCleanGLStateAtEachIteration&&(A.md(),V.reset(),V.Ia(),c.disable(c.DEPTH_TEST),A.Ba()),Q.jc?ya.Cc(bc,Yb,cc,Fb,ka.animateProcessOrder):
(Gb(),Hb(),Fb()))}function bc(){xa.ia();C.pb||Gb();var a=ya.jf();if(O.X.length>a)O.X.splice(0,O.X.length-a);else for(;O.X.length<a;)O.X.push(0);if(1!==O.m)if(qa.every(sb)){for(var b=0,d=0,e=0;e<qa.length;++e)qa[e].detected>b&&(b=qa[e].detected,d=0);for(b=0;b<a;++b)O.X[b]=d}else{d=Math.round(da.Ff*a);d=Math.min(1,d);b=O.Md;for(var g=e=0;e<a;++e){if(sb(qa[b])&&++g>d){do++b===O.m&&(b=0);while(sb(qa[b]))}O.X[e]=b++;b%=O.m}O.Md=b}d=[];++ia.Ra;for(b=0;b<a;++b){e=O.X[b];(g=-1!==d.indexOf(e))||d.push(e);
var n=ta[e];if(null===n)n=ma[0];else if(qa[e].isDetected){g=ta[e];if(ia.Qa[e]>pa.switchNNMinIterations){var p=void 0;var r=ta[e],m=Oa[e],v=0;var B=null;for(p in r.$){var D=Math.abs((r.$[p]?1:-1)-{isRightHand:m.Sa,isFlipped:m.Oa}[p])/2;D/=Math.max(.01,m.Ma);D>v&&(v=D,B=p)}p=v;p>pa.switchNNErrorThreshold&&(g=ac(e,B))}if(g){n=ia.Ab[e];n[ia.Ha[e]]=g.la;ia.Ha[e]=(ia.Ha[e]+1)%pa.switchNNConsecutiveIterations;if(B=g.la!==ta[e].la)for(p=0;p<pa.switchNNConsecutiveIterations&&(B=g.la===n[p],B);++p);B?(n=g,
++ia.Ic[e],ia.Qa[e]=0):(n=ta[e],++ia.Qa[e])}}else if(!g)for(g=null===Na[e]?0:Na[e].la,n=(g+1)%ma.length,n=pb&&0!==ia.Ra%3?g:n,n=ma[n],ia.Ic[e]=0,ia.Qa[e]=0,g=ia.Ha[e]=0;g<pa.switchNNConsecutiveIterations;++g)ia.Ab[e][g]=-1;ta[e]=n;O.La=e;O.uc=(.5+e)/O.m;O.Id=O.X.lastIndexOf(e)===b;e=O.La;if(g=ta[e])A.set("s55"),A.G("u44",g.va),Q.qa&&A.G("u43",qa[e].rz),1!==O.m&&A.G("u42",O.uc),U.ra.ea(),C.M.g(1),ra.Va.g(0),V.l(!1,!1),ra.Gb.u(),A.set("s3"),c.viewport(0,e,Ba,1),A.fa("u4",1,1/O.m),A.fa("u5",0,e/O.m),
V.l(!1,!1),U.ra.g(0),g.model.V(U.ra),Na[e]=g}ya.fe()}function Hb(){Q.Pb&&Q.Pb(1===O.m?qa[0]:qa)}function cc(){for(var a=0;a<O.m;++a)-1!==O.X.indexOf(a)&&Zb(a);xa.hg();Y.reset();ka.isCleanGLStateAtEachIteration&&(xa.reset(),c.enable(c.DEPTH_TEST));Hb();ka.isCleanGLStateAtEachIteration&&c.disable(c.BLEND)}function Fb(){fa===ca.play&&Ta.Cc(Eb)}function Gb(){if(C.ob)C.element.needsUpdate&&(C.M.jg(C.element.arrayBuffer),C.element.needsUpdate=!1);else{var a=C.element.currentTime,b=a-C.Bb;0>b&&(C.Bb=a);
1E3*b<da.lg||(C.Bb+=b,C.M.refresh())}}function dc(){function a(g,n){A.O(g,[{name:"u38",type:"1f",value:n/Ba}])}function b(){return Ka.labels.map(function(){return[0,0]})}function d(g){for(var n=[],p=0;p<O.m;++p)n.push(JSON.parse(JSON.stringify(g)));return n}Ba=2+Ka.tc;var e=new Float32Array(4*Ba);e={width:Ba,height:O.m,isFloat:!0,isPot:!1,array:function(g){for(var n=new Float32Array(g.length*O.m),p=0,r;p<O.m;++p)for(r=0;r<g.length;++r)n[p*g.length+r]=g[r];return n}(e)};ra.Va=ec.instance(e);ra.Gb=
Y.instance(e);ra.buffer=new Uint8Array(8*e.width*O.m);a("s54",.5);a("s53",1);a("s55",.5);Oa=d({Ma:0,x:0,y:0,W:1,Ta:0,Sa:0,Oa:0,lc:b(),Af:b(),Aa:0});qa=d({detected:0,isDetected:!1,x:0,y:0,s:1,rz:0,neuralNetworkInd:-1,isRightHand:!0,isFlipped:!1,rightHand:0,flipped:0,quality:0,landmarks:b()});qb=d({Se:0,Te:0,Re:0,Qe:0,Ke:0,Je:0})}function fc(){ma.forEach(function(a){a.model&&a.model.o()});ma.splice(0);nb();Pa.o();qb=qa=Oa=null}function tb(){A.O("s55",[{type:"1i",name:"u1",value:1},{type:"1i",name:"u40",
value:0},{type:"2f",name:"u41",value:U.H},{type:"1f",name:"u42",value:.5},{type:"1f",name:"u43",value:0}]);var a=[{type:"1i",name:"u45",value:0},{type:"1f",name:"u51",value:ra.size}];A.O("s54",[{type:"1i",name:"u40",value:1},{type:"1f",name:"u48",value:da.fg},{type:"1f",name:"u49",value:ka.threshold},{type:"1f",name:"u42",value:.5},{type:"1f",name:"u50",value:1},{type:"1f",name:"u43",value:0}].concat(a));A.O("s57",[{type:"1f",name:"u50",value:1}].concat(a));A.O("s58",a);A.O("s53",[{type:"1i",name:"u40",
value:0},{type:"1i",name:"u53",value:1},{type:"1f",name:"u55",value:.5*U.H[0]},{type:"2f",name:"u54",value:[0,.5/O.m]}])}function ub(){ra.size=ma[0].model.lf();U.H[0]=1;U.H[1]=U.B/U.I;Ib.v({yb:ka.overlapFactors,Qd:ka.nScaleLevels,B:U.B,I:U.I,$d:ka.scale0Factor,Y:ma[0].Y})}function Jb(a){if(null!==Q.Wa)Kb(Q.Wa,a);else{if(!Q.Xa)throw Error("You should provide neural networks through NNs or NNsPath option");gc(Q.Xa,function(b){Kb(b,a)})}}function gc(a,b){var d=a.length,e=Array(d),g=0;a.forEach(function(n,
p){Lb.get(n,function(r){r=JSON.parse(r);r.pe=n.split("/").pop();e[p]=r;++g===d&&b(e)})})}function Kb(a,b){(a.length?a:[a]).forEach(hc);b(a)}function hc(a,b){var d=0,e=da.Y.slice(0),g=null,n=Wa.Kb;if(a.exportData){var p=a.exportData;p.rzMax&&(d=p.rzMax*ic);p.translationScalingFactors&&(e=p.translationScalingFactors);p.evaluationConditions&&(g=p.evaluationConditions);p.outputFormat&&(n={ABSOLUTE:Wa.Kb,RELATIVE:Wa.Wc}[p.outputFormat]);0===b&&jc(p,Ka)}ma.push({Dc:d,$:g,id:a.pe,Y:e,va:1,la:-1,model:null,
yc:n})}function jc(a,b){b.Wd=a.keypoints;b.labels=a.keypoints.map(function(d){return d.label});b.sc=a.keypoints.length;b.tc=Math.ceil(b.sc/2)}function kc(a,b){a=new Ub({tb:a.layers,Bc:"gpuRawAvg",xc:lc});ma[b].model=a}function mc(){if(Pa.v({Sb:Q.Z,width:U.B,height:U.I,fc:!1,debug:!1,Sd:function(){Qa("GLCONTEXT_LOST")},antialias:!1,premultipliedAlpha:!0}))return!0;Qa("GL_INCOMPATIBLE");return!1}function sb(a){return!a.isDetected}function Mb(a,b,d,e){return d>a?Math.max(0,a+b/2-(d-e/2)):Math.max(0,
d+e/2-(a-b/2))}function nc(){return Oa.some(function(a,b){if(b===O.La)return!1;b=Oa[O.La];if(b.Aa>a.Aa||3>a.Aa||Mb(b.x,b.W,a.x,a.W)<da.Od*b.W)return!1;var d=U.B/U.I;return Mb(b.y,b.W*d,a.y,a.W*d)>da.Od*b.W*d})}function lc(){var a=O.La,b=ta[a],d=Na[a],e=qa[a];ra.Va.Rf(1);1!==O.m&&(c.viewport(0,0,Ba,O.m),A.set("s0"),A.ce("u1",1),V.l(!1,!1),A.ce("u1",0));c.viewport(0,a,1,1);A.set("s54");A.G("u44",b.va);b!==d&&(b=b.Y,A.Wf("u47",b[0]*U.H[0],b[1]*U.H[1],b[2]));Q.qa&&A.G("u43",e.rz);1!==O.m&&A.G("u42",O.uc);
e=1;1<O.m&&(e=nc()?0:1,A.G("u50",e));A.Xf("u46",Ib.get());V.l(!1,!1);O.Id&&(c.viewport(1,a,1,1),A.set("s57"),1<O.m&&A.G("u50",e),V.l(!1,!1),c.viewport(2,a,Ka.tc,1),A.set("s58"),V.l(!1,!1))}function Nb(){C.M&&C.M.remove();C.ob=C.element.isFakeVideo?!0:!1;var a=null;C.ob?a={isFlipY:!1,array:C.element.arrayBuffer,width:C.element.videoWidth,height:C.element.videoHeight,isKeepArray:!0}:C.element&&(a={J:C.element});C.Jc=Y.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));C.M=C.Jc}function Xa(){var a=
[{type:"mat2",name:"u39",value:C.D}];A.O("s56",[{type:"1i",name:"u1",value:0}].concat(a));A.O("s55",a)}function Ua(){C.N[0]=.5;C.N[1]=.5;var a=C.H[1]/C.H[0],b=Pa.U()/Pa.F();90===Math.abs(ua.rotate)&&(a=1/a);a>b?C.N[1]*=b/a:C.N[0]*=a/b;A.O("s54",[{name:"u52",type:"1f",value:b}]);C.D[0]=0;C.D[1]=0;C.D[2]=0;C.D[3]=0;switch(ua.rotate){case 0:C.D[0]=C.N[0];C.D[3]=C.N[1];break;case 180:C.D[0]=-C.N[0];C.D[3]=-C.N[1];break;case 90:C.D[1]=C.N[0];C.D[2]=-C.N[1];break;case -90:C.D[1]=-C.N[0],C.D[2]=C.N[1]}C.pb||
(C.D[1]*=-1,C.D[3]*=-1)}function vb(){var a=C.element.videoWidth,b=C.element.videoHeight,d=C.H[0]!==a||C.H[1]!==b;d&&(C.H[0]=a,C.H[1]=b);return d}function Ya(a,b){if(fa===ca.error)return!1;C.element=a;vb();b&&b();return!0}function wb(a){C.vc&&C.vc();C.Ka={video:{facingMode:{ideal:ua.facingMode},width:{min:ua.minWidth,max:ua.maxWidth,ideal:ua.idealWidth},height:{min:ua.minHeight,max:ua.maxHeight,ideal:ua.idealHeight}},audio:!1};X.Yc(C.Ka,ua.deviceId);X.get(C.element?C.element:X.pf(),function(b){C.wc&&
C.wc(b);a(b)},function(){Qa("WEBCAM_UNAVAILABLE")},C.Ka)}function Qa(a){fa!==ca.error&&(fa=ca.error,Q.Ja&&Q.Ja(a))}function oc(){for(var a=ma.length,b=0;b<a;++b){var d=ma[b],e=d.$;e&&!0===e.isRightHand&&(e=Object.assign({},e,{isRightHand:!1}),ma.push({Dc:d.Dc,$:e,id:d.id?d.id.replace("_R","_L")+"(GEN)":"GEN",Y:d.Y,va:-1,la:-1,model:d.model,yc:d.yc}))}}function Ob(a){a.forEach(kc);da.Ve&&oc();ma.forEach(function(b,d){b.la=d});dc();ub();U.ra&&U.ra.remove();U.ra=Y.instance({isPot:!0,isFloat:!1,width:ma[0].model.gf()});
tb()}function pc(a){if(!mc())return!1;A.$c([{id:"s56",name:"_",ua:"attribute vec2 a0;uniform mat2 u39;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u39*a0*vec2(1.,-1.);}",$a:["a0"],Fa:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u39"],precision:"lowp"},{id:"s55",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ua:"attribute vec2 a0;uniform sampler2D u40;uniform mat2 u39;uniform vec2 u41;uniform float u42,u38,u43,u44;varying vec2 vv0;void main(){vec2 d=a0*vec2(u44,1.);vec4 a=texture2D(u40,vec2(u38,u42));vec2 f=a.gb,g=a.a*u41;float b=cos(u43),c=sin(u43);vec2 h=mat2(b,c,-c,b)*d,i=f+.5*h*g;vv0=.5+2.*u39*(i-.5),gl_Position=vec4(a0,0.,1.);}",
$a:["a0"],Fa:[2],i:"u1 u40 u41 u42 u38 u43 u44 u39".split(" "),precision:"lowp"},{id:"s54",name:"_",h:"uniform sampler2D u45,u40;uniform vec3 u46,u47;uniform float u48,u49,u42,u38,u50,u51,u43,u52,u44;const vec4 e=vec4(.25,.25,.25,.25);void main(){float b=(u51-.5)/u51;vec4 f=texture2D(u45,vec2(.5/u51,b)),a=texture2D(u40,vec2(u38,u42));bool g=dot(f,e)>u49;g?a.r=2.:a.r>u48?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u50;if(a.r<.9)a=vec4(1.,u46);else{a.r*=step(1.9,a.r);float h=-u44*dot(e,texture2D(u45,vec2(1.5/u51,b))),i=-dot(e,texture2D(u45,vec2(2.5/u51,b))),j=-dot(e,texture2D(u45,vec2(3.5/u51,b))),c=cos(u43),d=sin(u43);vec2 k=mat2(c,d*u52,-d/u52,c)*vec2(h,i);a.gba+=vec3(k,j)*u47*a.a;}gl_FragColor=a;}",
ua:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u45 u40 u46 u48 u47 u50 u49 u42 u38 u51 u44 u43 u52".split(" ")},{id:"s57",name:"_",ua:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u45;uniform float u51,u50;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=(u51-.5)/u51,b=-dot(e,texture2D(u45,vec2(4.5/u51,a))),c=dot(e,texture2D(u45,vec2(.5/u51,a))),d=dot(e,texture2D(u45,vec2(5.5/u51,a))),f=dot(e,texture2D(u45,vec2(6.5/u51,a)));vec4 g=.5+vec4(b,c*u50,d,f)*.5;gl_FragColor=g;}",
i:["u45","u51","u50"]},{id:"s58",name:"_",ua:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u45;uniform float u51;const vec4 e=vec4(.25,.25,.25,.25),h=vec4(.5,.5,.5,.5);vec2 f(float a){float b=floor(a/u51),c=a-b*u51;return vec2(c,u51-.5-b)/u51;}vec2 g(float a){vec2 b=f(a*2.),c=f(a*2.+1.);float d=dot(e,texture2D(u45,b)),i=dot(e,texture2D(u45,c));return vec2(d,i);}void main(){float a=2.*gl_FragCoord.x;vec2 b=g(a-1.),c=g(a);gl_FragColor=h+.5*vec4(b,c)/1.2;}",i:["u45",
"u51"]},{id:"s53",name:"_",h:"uniform sampler2D u40,u53;uniform vec2 u54;uniform float u55,u38;varying vec2 vv0;void main(){float g=step(.5,mod(gl_FragCoord.y+1.5,2.)),a=step(u38,vv0.x);vec2 d=vv0+u54;vec4 b=mix(texture2D(u53,d),texture2D(u40,d),vec4(1.,a,a,a));b.a*=mix(u55,1.,a);vec4 f=floor(255.*b),h=255.*(255.*b-f),c=mix(f,h,g)/255.;c.x=mix(step(b.x,1.5),c.x,a),gl_FragColor=c;}",i:["u40","u53","u55","u54","u38"]}]);Ob(a);gb()}function gb(){if(!hb&&fa!==ca.wb&&fa!==ca.error&&2===++Pb){Nb();null!==
C.element&&(Ua(),Xa());for(var a=0;a<O.m;++a)rb.push(fb.Rd);xb=!0;Q.Ja&&Q.Ja(!1,{GL:c,canvasElement:Q.Z,video:C.element,videoTexture:C.M?C.M.get():null,videoTransformMat2:C.D,maxHandsDetected:O.m,landmarksLabels:Ka.labels});eb()}}var yb=null,Ja={ih:function(a){return Math.ceil(Math.log2(a))},Bh:function(a){return Math.log2(a)},xh:function(a){return 0===Math.log2(a)%1},vg:function(a){var b=[0,0,0,0];a.forEach(function(d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2];b[3]+=d[3]});return b},wg:function(a,b,d){return Math.min(Math.max(a,
b),d)},zg:function(a){return a*Math.PI/180},Hh:function(a,b){b=Math.pow(10,b);return Math.round(a*b)/b},Ih:function(a){return Math.round(1E6*a)/1E6},jh:function(a,b){return(100*a/b).toFixed(3)},za:function(a,b,d){return a*(1-d)+b*d},Oe:function(a,b){return Ja.Ee(a-b)},Ee:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Cg:function(a,b){return Math.abs(Ja.Oe(a,b))},mg:function(a,b){return Math.atan2(Math.sin(a)+Math.sin(b),Math.cos(a)+Math.cos(b))}},Lb={get:function(a,
b,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?b(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},fh:function(a,b){Lb.get(a,function(d){b(JSON.parse(d))})},Dh:function(a,b,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};
e.send(b)},Tg:function(a,b){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){b(d.response)};d.send()}},qc={create:function(a,b){for(var d=Array(b),e=0;e<b;++e)d[e]=a;return d},Ag:function(a,b){for(var d=0;d<a.length;++d)b[d]=a[d]},clone:function(a){for(var b=Array(a.length),d=0;d<a.length;++d)b[d]=a[d];return b},Lh:function(a,b,d){a.forEach(function(e,g){b[g]=e*d})},Uh:function(a){for(var b=a.length-1;0<b;--b){var d=Math.floor(Math.random()*(b+1)),e=a[b];
a[b]=a[d];a[d]=e}},Wh:function(a){return a.sort(function(b,d){return b-d})},eg:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},zb={Tb:function(a,b){if(0===b||"object"!==typeof a)return a;a=Object.assign({},a);b=void 0===b||-1===b?-1:b-1;for(var d in a)a[d]=zb.Tb(a[d],b);return a}},$b={Vh:function(a,b,d){a=Math.min(Math.max((d-a)/(b-a),0),1);return a*a*(3-2*a)},Bf:function(a,b,d){return Math.min(Math.max((d-a)/(b-a),0),1)},Ng:function(a,b,d,e){return Math.pow(Math.min(Math.max((e-
a)/(b-a),0),1),d)},$h:function(){return 0},Ch:function(){return 1},Ah:function(a){return a},Kg:function(a){return a*a},Pg:function(a){return a*(2-a)},Hg:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Fg:function(a){return a*a*a},Og:function(a){return--a*a*a+1},Gg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Lg:function(a){return a*a*a*a},Qg:function(a){return 1- --a*a*a*a},Ig:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},Mg:function(a){return a*a*a*a*a},Rg:function(a){return 1+--a*a*a*a*
a},Jg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},rc={Ye:function(a,b,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+b+");";case "elu":return d+"=mix(exp(-abs("+b+"))-vec4(1.,1.,1.,1.),"+b+",step(0.,"+b+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+b+"))-vec4(0.1,0.1,0.1,0.1),"+b+",step(0.,"+b+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},A=function(){function a(u,f,y){f=u.createShader(f);u.shaderSource(f,
y);u.compileShader(f);return u.getShaderParameter(f,u.COMPILE_STATUS)?f:!1}function b(u,f,y){f=a(u,u.VERTEX_SHADER,f);y=a(u,u.FRAGMENT_SHADER,y);u===c&&p.push(f,y);var G=u.createProgram();u.attachShader(G,f);u.attachShader(G,y);u.linkProgram(G);return G}function d(u,f){f.C=f.C?!0:!1;if(!f.C){void 0===f.ua&&(f.ua="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===f.$a&&(f.$a=["a0"]);void 0===f.Fa&&(f.Fa=[2]);if(void 0===
f.precision||"highp"===f.precision)f.precision=D;f.id=v++;void 0!==f.ae&&(f.ae.forEach(function(G,L){f.h=f.h.replace(G,f.Db[L])}),f.ae.splice(0));f.Rc=0;f.Fa.forEach(function(G){f.Rc+=4*G});f.ta=b(u,f.ua,"precision "+f.precision+" float;\n"+f.h);f.A={};f.i.forEach(function(G){f.A[G]=u.getUniformLocation(f.ta,G)});f.attributes={};f.Ga=[];f.$a.forEach(function(G){var L=u.getAttribLocation(f.ta,G);f.attributes[G]=L;f.Ga.push(L)});if(f.j){u.useProgram(f.ta);m=f;r=f.id;for(var y in f.j)u.uniform1i(f.A[y],
f.j[y])}f.sa=!0}}function e(u){za.Vf(N);r!==u.id&&(N.S(),r=u.id,m=u,c.useProgram(u.ta),u.Ga.forEach(function(f){0!==f&&c.enableVertexAttribArray(f)}))}function g(u,f,y){d(u,f,y);u.useProgram(f.ta);u.enableVertexAttribArray(0);r=-1;return m=f}function n(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var p=[],r=-1,m=null,v=0,B=!1,D="highp",h=["u1"],t=["u0"],w={u1:0},l={u0:0},q={u1:0,u2:1},H={u3:0},I={s0:n(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:h,j:w,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:q},s3:{h:"uniform sampler2D u1;uniform vec2 u4,u5;varying vec2 vv0;void main(){vec2 a=vv0*u4+u5;gl_FragColor=texture2D(u1,a);}",i:["u1","u4","u5"],j:w,C:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:h,j:w},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:q},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:h,j:w},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:h,j:w},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:l},s9:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:l},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:h,j:w},s11:{h:"uniform sampler2D u1,u6;uniform float u7;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);gl_FragColor=mix(b,a,u7*f);}",i:["u1","u6","u7"],j:{u1:0,u6:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u8)+texture2D(u1,vv0+u8*vec2(1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,1.)));}",
i:["u1","u8"],j:w},s13:{h:"uniform sampler2D u1;uniform vec4 u9;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u9);gl_FragColor=j(a);}",
i:["u1","u9"],j:w},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:t,j:l,C:!0},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:t,j:l},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:t,j:l},
s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:t,j:l},s18:{h:"uniform sampler2D u0,u7,u10;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u7,vv0),d=texture2D(u10,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u7","u10"],j:{u0:0,u7:1,u10:2},C:!0},s19:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:t,j:l},s20:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:t,j:l,C:!0},s21:{h:"uniform sampler2D u0,u11;uniform float u12;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,e);float b=u12*u12;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u11","u12"],j:{u0:0,u11:1},C:!0},s22:{h:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),f=floor(u13.x*fract(b*u13.y)),g=(f*u13.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u13"],j:w},s23:{h:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),f=texture2D(u15,c);gl_FragColor=d*f;}",i:["u14","u15","u16"],j:{u15:0,u14:1,u16:2},C:!0},s24:{h:"uniform float u17;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 a=fract(vv0*u17);vec4 b=texture2D(u14,vv0),c=texture2D(u15,a);gl_FragColor=b*c;}",i:["u15","u14","u17"],j:{u15:0,u14:1}},s25:{h:"uniform float u17;uniform sampler2D u14,u15,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u17,l=floor(h),c=h-l;vec4 m=texture2D(u14,vv0),d=texture2D(u15,c),a=texture2D(u21,vv0);a=a*255.;vec4 n=texture2D(u18,c),o=texture2D(u19,c),p=texture2D(u20,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u14 u15 u17 u21 u18 u19 u20".split(" "),j:{u15:0,u14:1,u21:3,u18:4,u19:5,u20:6},C:!0},s26:{h:"uniform sampler2D u14,u15,u22;uniform float u17,u23,u24,u25;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u23*vv0),b=u23*vv0-a;float c=u17/u23;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u23;float k=u23*u25/u17;vec2 l=k*d,h=(l+f*u24)/u25,i=step(h,j);vec4 m=texture2D(u14,g),n=texture2D(u15,h),o=m*n*i.x*i.y,p=texture2D(u22,g);gl_FragColor=o*u24*u24+p;}",i:"u14 u15 u17 u23 u24 u25 u22".split(" "),
j:{u15:0,u14:1,u22:2}},s27:{h:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",i:["u14","u15"],j:{u15:0,u14:1},C:!0},s28:{h:"uniform sampler2D u1,u22;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u26*texture2D(u1,vv0);}",i:["u1","u22","u26"],j:{u1:0,u22:1}},s29:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:h,j:w,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u27"],j:w,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u27"],j:w,precision:"lowp"},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u28"],j:q,C:!0},s33:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u28"],j:q,C:!0},s34:{h:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u8*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*h),d=texture2D(u3,a+u8*i),j=texture2D(u3,a+u8),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u8"],j:H},s35:{h:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*k),d=texture2D(u3,a+u8*l),g=texture2D(u3,a+u8),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u8*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u8*m),d=f(a+u8*2.),g=f(a+u8*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u8"],j:H,C:!0},
s36:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:w,precision:"lowp",C:!0},s37:{h:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u8)+2002./e*texture2D(u1,vv0-2.*u8)+3003./e*texture2D(u1,vv0-u8)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u8)+2002./e*texture2D(u1,vv0+2.*u8)+1001./e*texture2D(u1,vv0+3.*u8);gl_FragColor=a;}",i:["u8","u1"],j:w,precision:"lowp",
C:!0},s38:{h:"uniform sampler2D u1,u11,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u11,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u11","u29"],j:{u1:0,u11:1,u29:2},C:!0}},M={s39:{h:"uniform float u17,u30;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u17","u14","u15","u22","u30"],Db:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{h:"uniform float u17,u30,u25;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u25,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u25;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u25,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u17 u25 u14 u15 u22 u30".split(" "),Db:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},z=null,J=null,N={rb:function(){return B},v:function(){if(!B){z=zb.Tb(I,2);J=zb.Tb(M,2);D="highp";for(var u in z)d(c,z[u],u);A.set("s0");c.enableVertexAttribArray(0);B=!0}},$c:function(u){u.forEach(function(f){N.Zc(f)})},Zc:function(u){z[u.id]=u;d(c,u,u.id)},Bd:function(u,f,y){f||(f=u);z[f]=Object.create(J[u]);z[f].wf=!0;J[u].Db&&J[u].Db.forEach(function(G,L){z[f].h=z[f].h.replace(new RegExp(G,"g"),y[L])});d(c,
z[f],f)},set:function(u){var f=z[u];f.C&&(f.C=!1,d(c,f,u));e(f)},Ua:function(u){return g(u,n(),"s41")},Fc:function(u){return g(u,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s42")},We:function(u){return"undefined"===typeof z[u]?!1:z[u].sa},S:function(){-1!==r&&(r=-1,m.Ga.forEach(function(u){0!==u&&c.disableVertexAttribArray(u)}))},Hc:function(){var u=0;m.Ga.forEach(function(f,y){y=m.Fa[y];c.vertexAttribPointer(f,y,c.FLOAT,!1,m.Rc,u);u+=4*y})},md:function(){c.enableVertexAttribArray(0)},
Ba:function(){N.Eb(c)},Eb:function(u){u.vertexAttribPointer(m.Ga[0],2,u.FLOAT,!1,8,0)},ce:function(u,f){c.uniform1i(m.A[u],f)},G:function(u,f){c.uniform1f(m.A[u],f)},fa:function(u,f,y){c.uniform2f(m.A[u],f,y)},Ph:function(u,f){c.uniform2fv(m.A[u],f)},Xf:function(u,f){c.uniform3fv(m.A[u],f)},Wf:function(u,f,y,G){c.uniform3f(m.A[u],f,y,G)},Qh:function(u,f,y,G,L){c.uniform4f(m.A[u],f,y,G,L)},Gc:function(u,f){c.uniform4fv(m.A[u],f)},Rh:function(u,f){c.uniformMatrix2fv(m.A[u],!1,f)},Sh:function(u,f){c.uniformMatrix3fv(m.A[u],
!1,f)},Th:function(u,f){c.uniformMatrix4fv(m.A[u],!1,f)},O:function(u,f){N.set(u);f.forEach(function(y){switch(y.type){case "4f":c.uniform4fv(m.A[y.name],y.value);break;case "3f":c.uniform3fv(m.A[y.name],y.value);break;case "2f":c.uniform2fv(m.A[y.name],y.value);break;case "1f":c.uniform1f(m.A[y.name],y.value);break;case "1i":c.uniform1i(m.A[y.name],y.value);break;case "mat2":c.uniformMatrix2fv(m.A[y.name],!1,y.value);break;case "mat3":c.uniformMatrix3fv(m.A[y.name],!1,y.value);break;case "mat4":c.uniformMatrix4fv(m.A[y.name],
!1,y.value)}})},hh:function(){return"lowp"},o:function(){c.disableVertexAttribArray(0);N.S();for(var u in z){var f=z[u];f.sa&&(f.sa=!1,c.deleteProgram(f.ta));f.wf&&delete z[u]}p.forEach(function(y){c.deleteShader(y)});p.splice(0);v=0;B=!1;m=null;r=-1}};return N}(),c=null,Pa=function(){function a(h){console.log("ERROR in ContextFF: ",h);return!1}function b(h){function t(){Ga.o();Z.reset();l.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var w=document.createElement("canvas");w.setAttribute("width",5);w.setAttribute("height",5);var l=null;try{l=w.getContext("webgl2",h)}catch(q){return!1}if(!l)return!1;d(l);Z.nd(l);h=Z.Ub(l);if(!h.ja&&!h.ka)return t(),!1;h=Ga.dd(l,h);t();return h?!0:!1}function d(h){h.clearColor(0,0,0,0);h.disable(h.DEPTH_TEST);h.disable(h.BLEND);h.disable(h.DITHER);h.disable(h.STENCIL_TEST);h.disable(h.CULL_FACE);h.GENERATE_MIPMAP_HINT&&h.hint(h.GENERATE_MIPMAP_HINT,h.FASTEST);h.disable(h.SAMPLE_ALPHA_TO_COVERAGE);
h.disable(h.SAMPLE_COVERAGE);h.depthFunc(h.LEQUAL);h.clearDepth(1)}var e=null,g=null,n=null,p=null,r=!0,m=null,v=null,B=[],D={F:function(){return e.width},U:function(){return e.height},Yg:function(){return e},Wg:function(){return c},ma:function(){return r},flush:function(){c.flush()},bf:function(){m||(m=new Uint8Array(e.width*e.height*4));c.readPixels(0,0,e.width,e.height,c.RGBA,c.UNSIGNED_BYTE,m);return m},Zg:function(){return e.toDataURL("image/jpeg")},$g:function(){xa.P();g||(g=document.createElement("canvas"),
n=g.getContext("2d"));g.width=e.width;g.height=e.height;for(var h=D.bf(),t=n.createImageData(g.width,g.height),w=g.width,l=g.height,q=t.data,H=0;H<l;++H)for(var I=l-H-1,M=0;M<w;++M){var z=4*(H*w+M),J=4*(I*w+M);q[z]=h[J];q[z+1]=h[J+1];q[z+2]=h[J+2];q[z+3]=h[J+3]}n.putImageData(t,0,0);return g.toDataURL("image/png")},af:function(h){!g&&h&&(g=document.createElement("canvas"),n=g.getContext("2d"));var t=h?g:document.createElement("canvas");t.width=e.width;t.height=e.height;(h?n:t.getContext("2d")).drawImage(e,
0,0);return t},v:function(h){h.Ie&&!h.Sb?e=document.getElementById(h.Ie):h.Sb&&(e=h.Sb);e||(e=document.createElement("canvas"));e.width=h&&void 0!==h.width?h.width:512;e.height=h&&void 0!==h.height?h.height:512;"undefined"===typeof h&&(h={});void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!1);void 0===h.fc&&(h.fc=!0);void 0===h.antialias&&(h.antialias=!1);if(c)r=c instanceof WebGL2RenderingContext;else{r=!0;var t={antialias:h.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:h.premultipliedAlpha,
stencil:!1,depth:h.fc};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(t.antialias=!1);var w=b(t);!w&&t.antialias&&(t.antialias=!1,w=b(t));w&&(c=e.getContext("webgl2",t));c?r=!0:((c=e.getContext("webgl",t))||(c=e.getContext("experimental-webgl",t)),r=!1)}if(!c)return a("WebGL1 and 2 are not enabled");(p=c.getExtension("WEBGL_lose_context"))&&h.Sd&&(v=h.Sd,e.addEventListener("webglcontextlost",v,!1));if(!Z.v())return a("Not enough GL capabilities");d(c);A.v();V.v();
if(!Ga.dd(c,Z.$e()))return a("Cannot filter float textures");B.forEach(function(l){l(c)});B.splice(0);return!0},rg:function(){return new Promise(function(h){c?h(c):B.push(h)})},o:function(){c&&(Z.o(),A.o(),Ga.o());p&&v&&(e.removeEventListener("webglcontextlost",v,!1),p=v=null);c=m=n=g=e=null;B.splice(0)}};return D}(),za=function(){function a(){null===b&&("undefined"!==typeof A?b=A:"undefined"!==typeof JEShaders&&(b=JEShaders))}var b=null;a();return{reset:function(){b=null},Vf:function(d){b!==d&&(b&&
b.S(),b=d)},rb:function(){return b.rb()},Ba:function(){return b.Ba()},Eb:function(d){return b.Eb(d)},Hc:function(){return b.Hc()},S:function(){return b.S()},set:function(d){return b.set(d)},Ua:function(d){a();return b.Ua(d)},Fc:function(d){a();return b.Fc(d)}}}(),Ea=function(){function a(k){c.bindTexture(c.TEXTURE_2D,k)}function b(k){f[0]=k;k=y[0];var F=k>>16&32768,K=k>>12&2047,P=k>>23&255;return 103>P?F:142<P?F|31744|((255==P?0:1)&&k&8388607):113>P?(K|=2048,F|(K>>114-P)+(K>>113-P&1)):F=(F|P-112<<
10|K>>1)+(K&1)}function d(k){var F=new Uint16Array(k.length);k.forEach(function(K,P){F[P]=b(K)});return F}function e(){if(null!==G.cc)return G.cc;var k=n(d([.5,.5,.5,.5]));return null===k?!0:G.cc=k}function g(){if(null!==G.dc)return G.dc;var k=n(new Uint8Array([127,127,127,127]));return null===k?!0:G.dc=k}function n(k){if(!za.rb()||!l)return null;var F=null,K=Math.sqrt(k.length/4);try{var P=c.getError();if("FUCKING_BIG_ERROR"===P)return!1;F=L.instance({isFloat:!1,T:!0,array:k,width:K});P=c.getError();
if(P!==c.NO_ERROR)return!1}catch(sa){return!1}na.P();c.viewport(0,0,K,K);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);za.set("s0");F.bd(0);oa.l(!0,!0);k=4*K*K;P=new Uint8Array(k);c.readPixels(0,0,K,K,c.RGBA,c.UNSIGNED_BYTE,P);K=!0;for(var ba=0;ba<k;++ba)K=K&&3>Math.abs(P[ba]-127);F.remove();na.ia();return K}var p=0,r=null,m=0,v=null,B=null,D=null,h=null,t=null,w=null,l=!1,q=[],H={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,
isFlipY:null,width:0,height:0,url:null,array:null,data:null,J:null,bc:null,vf:!1,T:!1,pa:null,vb:4,pc:0},I=!1,M=null,z=null,J=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],N=!1,u=!1,f=new Float32Array(1),y=new Int32Array(f.buffer),G={cc:null,dc:null},L={v:function(){l||(t=[c.RGBA,null,c.RGBA,c.RGBA],w=[c.RGBA,null,c.RGBA,c.RGBA],r=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7],N="undefined"!==typeof JEContext,u="undefined"!==typeof Z,N&&JEContext.yh()&&r.push(c.TEXTURE8,
c.TEXTURE9),v=[-1,-1,-1,-1,-1,-1,-1,-1],h=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT],l=!0)},sf:function(){if(!B){for(var k=new Float32Array(16384),F=0;16384>F;++F)k[F]=2*Math.random()-1;B={random:L.instance({isFloat:!0,isPot:!0,array:k,width:64}),ie:L.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}L.kg()},ph:function(){return B.ie},kg:function(){h[1]=Z.Yb(c)},Tf:function(){w=t=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},Zd:function(k){A.set("s1");na.P();var F=k.F(),K=k.U();c.viewport(0,0,F,K);
k.g(0);oa.l(!1,!1)},Fh:function(k,F){L.Zd(k);c.readPixels(0,0,k.F(),k.U(),c.RGBA,c.UNSIGNED_BYTE,F)},Gh:function(k,F){L.Zd(k);return Z.Cb(0,0,k.F(),k.U(),F)},ud:function(k,F,K,P,ba,sa,Ca){k.activeTexture(k.TEXTURE0);var x=k.createTexture();k.bindTexture(k.TEXTURE_2D,x);ba=ba instanceof Float32Array?ba:new Float32Array(ba);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST);
k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,sa);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,K,P,0,k.RGBA,k.FLOAT,ba);k.bindTexture(k.TEXTURE_2D,null);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);Ca&&(na.ia(),A.Ua(k));k.viewport(0,0,K,P);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,F,0);k.bindTexture(k.TEXTURE_2D,x);Ca?oa.l(!0,!0):V.gb(k);k.deleteTexture(x);l&&(v[0]=-1,D=null,p=0)},Mb:function(k){k!==p&&(c.activeTexture(r[k]),p=k)},instance:function(k){function F(){R=
void 0!==x.J.videoWidth?x.J.videoWidth:x.J.width;T=void 0!==x.J.videoHeight?x.J.videoHeight:x.J.height}function K(E){var S=c.getError();if("FUCKING_BIG_ERROR"===S)return!1;c.texImage2D(c.TEXTURE_2D,0,ja,ea,ha,E);S=c.getError();S!==c.NO_ERROR&&ea!==c.RGBA&&(ea=c.RGBA,c.texImage2D(c.TEXTURE_2D,0,ja,ea,ha,E));return!0}function P(){if(!Qb){a(va);Da&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,Da);x.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,x.isMirrorX?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_T,x.isMirrorY?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));x.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&c.texParameterf(c.TEXTURE_2D,JEContext.bh().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.ng);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,x.isLinear?c.LINEAR:c.NEAREST);x.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,x.isMipmap&&!Ra?c.NEAREST_MIPMAP_LINEAR:
c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,x.isMipmap&&!Ra?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);ea=t[x.vb-1];ja=w[x.vb-1];ha=h[Ab];if(Z.ma()){var E=Z.cf();ea===c.RGBA&&ha===c.FLOAT?x.isMipmap||x.isLinear?ja=Ga.ef(c):Z.ed()?E&&(ja=E):ja=c.RGBA16F||c.RGBA:ea===c.RGB&&ha===c.FLOAT&&E&&(ja=E,ea=c.RGBA)}if(x.T&&!x.isFloat||x.isFloat&&x.isMipmap&&Ga.zf())ja=Z.df(),ha=Z.Yb(c);x.pc&&(ib=x.pc);x.isSrgb&&4===x.vb&&(ea=JEContext.nh());if(x.J)K(x.J);else if(x.url)K(La);else if(wa){E=wa;try{"FUCKING_BIG_ERROR"!==
c.getError()&&(c.texImage2D(c.TEXTURE_2D,0,ja,R,T,0,ea,ha,E),c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,ja,R,T,0,ea,ha,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,R,T,0,c.RGBA,c.UNSIGNED_BYTE,null)))}catch(Ec){c.texImage2D(c.TEXTURE_2D,0,ja,R,T,0,ea,ha,null)}x.isKeepArray||(wa=null)}else E=c.getError(),"FUCKING_BIG_ERROR"!==E&&(c.texImage2D(c.TEXTURE_2D,0,ja,R,T,0,ea,ha,null),E=c.getError(),E!==c.NO_ERROR&&(ea=c.RGBA,x.T&&ha!==c.FLOAT&&(ha=c.FLOAT,c.texImage2D(c.TEXTURE_2D,
0,ja,R,T,0,ea,ha,null))));if(x.isMipmap)if(!Ra&&aa)aa.Xb(),jb=!0;else if(Ra){E=Math.log2(Math.min(R,T));Va=Array(1+E);Va[0]=va;for(var S=1;S<=E;++S){var la=Math.pow(2,S),W=R/la;la=T/la;var Sa=c.createTexture();a(Sa);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,ja,W,la,0,ea,ha,null);a(null);Va[S]=Sa}jb=!0}a(null);v[p]=-1;Da&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);Za=!0;x.pa&&aa&&(x.pa(aa),x.pa=
null)}}function ba(){for(var E=R*T,S=2*E,la=3*E,W=0;W<E;++W)Aa[0][W]=$a[W],Aa[1][W]=$a[W+E],Aa[2][W]=$a[W+S],Aa[3][W]=$a[W+la]}function sa(){var E=R*T*4;Ha=[new Uint8Array(E),new Uint8Array(E),new Uint8Array(E),new Uint8Array(E)];Aa=[new Float32Array(Ha[0].buffer),new Float32Array(Ha[1].buffer),new Float32Array(Ha[2].buffer),new Float32Array(Ha[3].buffer)];kb=new Uint8Array(4*E);$a=new Float32Array(kb.buffer);ab=!0}function Ca(){Ia.Ob=new Uint8Array(R*T*4);Ia.vd=new Float32Array(Ia.buffer);Ia.ba=
!0}var x=Object.assign({},H,k),bb=m++;null===x.isFlipY&&(x.isFlipY=x.url||x.array?!0:!1);x.data&&(x.array="string"===typeof x.data?Xb(x.data):x.isFloat?new Float32Array(x.data):new Uint8Array(x.data),x.isFlipY=!1);var Ab=0,Rb=x.J?!0:!1,cb=null,Bb=null,Sb=!1,Cb=null;x.T=x.T||x.isFloat;x.T&&(Ab=1);!x.vf&&x.isFloat&&u&&!Z.ed()&&(x.isFloat=!1);x.isFloat&&(Ab=2);x.isAnisotropicFiltering&&N&&!JEContext.sh()&&(x.isAnisotropicFiltering=!1);var va=x.bc||c.createTexture(),La=null,wa=!1,R=0,T=0,Za=!1,Qb=!1,
ab=!1,Aa=null,Ha=null,kb=null,$a=null,ja=null,ea=null,ha=null,Da=x.isFlipY,sc=(k=x.T&&x.isMipmap)&&Ga.ze(),Ra=k&&sc?!0:!1,Va=null,ib=-1,jb=!1,Ia={ba:!1,Ob:null,vd:null};x.width&&(R=x.width,T=x.height?x.height:R);var aa={get:function(){return va},F:function(){return R},U:function(){return T},qh:function(){return x.url},th:function(){return x.isFloat},vh:function(){return x.T},wh:function(){return x.isLinear},Xb:function(){c.generateMipmap(c.TEXTURE_2D)},xe:function(E,S){Ra?(E||(E=aa.yd()),L.Mb(S),
a(Va[E]),v[S]=-1):aa.g(S)},yd:function(){-1===ib&&(ib=Math.log(R)/Math.log(2));return ib},Xe:function(E){if(Ra){E||(E=aa.yd());A.set("s12");L.Mb(0);for(var S=R,la=T,W=1;W<=E;++W)S/=2,la/=2,A.fa("u8",.25/S,.25/la),c.viewport(0,0,S,la),a(Va[W-1]),c.framebufferTexture2D(na.jb(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,Va[W],0),oa.l(!1,1===W);v[0]=-1}else aa.Xb()},Oh:function(E){(Rb=!qc.eg(E))?(wa=null,x.J=E,F()):wa=E},g:function(E){if(!Za)return!1;L.Mb(E);if(v[E]===bb)return!1;a(va);v[E]=bb;return!0},bd:function(E){c.activeTexture(r[E]);
p=E;a(va);v[E]=bb},u:function(){D=aa;c.framebufferTexture2D(na.jb(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,va,0)},ea:function(){D=aa;c.viewport(0,0,R,T);c.framebufferTexture2D(na.jb(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,va,0)},Pc:L.Pc,resize:function(E,S){R=E;T=S;P()},clone:function(E){E=L.instance({width:R,height:T,T:x.T,isFloat:x.isFloat,isLinear:x.isLinear,isMirrorY:x.isMirrorY,isFlipY:E?!Da:Da,isPot:x.isPot});za.set("s0");na.ia();E.u();c.viewport(0,0,R,T);aa.g(0);oa.l(!0,!0);return E},Yf:function(){c.viewport(0,
0,R,T)},remove:function(){c.deleteTexture(va);Qb=!0;q.splice(q.indexOf(aa),1);aa=null},refresh:function(){aa.bd(0);Da&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);Rb?c.texImage2D(c.TEXTURE_2D,0,ja,ea,ha,x.J):c.texImage2D(c.TEXTURE_2D,0,ja,R,T,0,ea,ha,wa);Da&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Yd:function(){ab||sa();c.readPixels(0,0,R,4*T,c.RGBA,c.UNSIGNED_BYTE,kb);ba();return Aa},Mf:function(){ab||sa();return Z.Cb(0,0,R,4*T,kb).then(function(){ba();return Aa})},Of:function(){Ia.ba||Ca();c.readPixels(0,
0,R,T,c.RGBA,c.UNSIGNED_BYTE,Ia.Ob);return Ia.vd},Nf:function(){Ia.ba||Ca();return Z.Cb(0,0,R,T,Ia.Ob)},kd:function(E){na.P();A.set("s13");aa.g(0);if(E)c.viewport(0,0,R,T),A.Gc("u9",.25,.25,.25,.25),oa.l(!1,!0);else for(E=0;4>E;++E)c.viewport(0,T*E,R,T),A.Gc("u9",J[E]),oa.l(!1,0===E)},jg:function(E){var S=ha===h[0]&&!g();a(va);Da&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);S?(Sb||(cb=document.createElement("canvas"),cb.width=R,cb.height=T,Bb=cb.getContext("2d"),Cb=Bb.createImageData(R,T),Sb=!0),Cb.data.set(E),
Bb.putImageData(Cb,0,0),c.texImage2D(c.TEXTURE_2D,0,ja,ea,ha,cb)):c.texImage2D(c.TEXTURE_2D,0,ja,R,T,0,ea,ha,E);v[p]=bb;Da&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Zh:function(E,S){a(va);S&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);c.texImage2D(c.TEXTURE_2D,0,ja,ea,ha,E);v[p]=bb;S&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Mh:function(E,S){var la=R*T,W=4*la;E=x.T?E?"RGBE":"JSON":"RGBA";S&&(E=S);S=Z.ma()&&!1;var Sa=null;switch(E){case "RGBE":Sa="s43";break;case "JSON":Sa=S?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Sa=
"s7"}ab||("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E?(Ha=new Uint8Array(W),ab=!0):"JSON"!==E||S||sa());na.P();A.set(Sa);aa.g(0);W=null;if("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E){c.viewport(0,0,R,T);oa.l(!0,!0);c.readPixels(0,0,R,T,c.RGBA,c.UNSIGNED_BYTE,Ha);if("RGBAARRAY"===E)return{data:Ha};I||(M=document.createElement("canvas"),z=M.getContext("2d"),I=!0);M.width=R;M.height=T;la=z.createImageData(R,T);la.data.set(Ha);z.putImageData(la,0,0);W=M.toDataURL("image/png")}else if("JSON"===E)if(S)W=new Float32Array(la),
c.viewport(0,0,R,T),oa.l(!0,!0),c.readPixels(0,0,R,T,c.RGBA,c.FLOAT,W);else{for(W=0;4>W;++W)c.viewport(0,T*W,R,T),A.Gc("u9",J[W]),oa.l(!W,!W);aa.Yd();W=Array(la);for(S=0;S<la;++S)W[4*S]=Aa[0][S],W[4*S+1]=Aa[1][S],W[4*S+2]=Aa[2][S],W[4*S+3]=Aa[3][S]}return{format:E,data:W,width:R,height:T,isMirrorY:x.isMirrorY,isFlipY:"RGBA"===E?x.isFlipY:!x.isFlipY}}};x.isMipmap&&!Ra&&Za&&!jb&&(aa.Xb(),jb=!0);if(x.url)a(va),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),La=new Image,La.Bg="Anonymous",
La.crossOrigin="Anonymous",La.src=x.url,La.onload=function(){R=La.width;T=La.height;P()};else if(x.J){var Tb=function(){F();R?P():setTimeout(Tb,1)};Tb()}else x.array?(x.T&&!x.isFloat?x.array instanceof Uint16Array?(wa=x.array,P()):e()?(wa=d(x.array),P()):(P(),L.ud(c,va,aa.F(),aa.U(),x.array,Da,!0)):(wa=x.isFloat?x.array instanceof Float32Array?x.array:new Float32Array(x.array):x.array instanceof Uint8Array?x.array:new Uint8Array(x.array),P()),x.isKeepArray||(wa&&wa!==x.array&&(wa=null),delete x.array)):
x.bc?Za=!0:P();aa.mh=aa.F;x.pa&&Za&&(x.pa(aa),x.pa=null);q.push(aa);return aa},P:function(k){k!==p&&(c.activeTexture(r[k]),p=k);v[k]=-1;a(null)},qg:function(k){B.random.g(k)},Pc:function(){D=null;c.framebufferTexture2D(na.jb(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},reset:function(){0!==p&&c.activeTexture(r[0]);for(var k=0;k<r.length;++k)v[k]=-1;p=-1},Jh:function(){p=-1},gg:function(){for(var k=0;k<r.length;++k)L.P(k)},wd:function(){B&&(B.random.remove(),B.ie.remove())},Yh:function(k,F){if("RGBA"===
k.format||"RGBE"===k.format){var K=new Image;K.src=k.data;K.onload=function(){L.instance({isMirrorY:k.isMirrorY,isFlipY:k.isFlipY,isFloat:!1,J:K,pa:function(P){if("RGBA"===k.format)F(P);else{var ba=k.width,sa=k.height,Ca=L.instance({isMirrorY:k.isMirrorY,isFloat:!0,width:ba,height:sa,isFlipY:k.isFlipY});na.ia();c.viewport(0,0,ba,sa);A.set("s44");Ca.u();P.g(0);oa.l(!0,!0);L.P(0);F(Ca);c.flush();setTimeout(P.remove,50)}}})}}else"JSON"===k.format?F(L.instance({isFloat:!0,isFlipY:k.isFlipY,width:k.width,
height:k.height,array:new Float32Array(k.data)})):F(!1)},Fe:d,o:function(){D&&(xa.ia(),L.Pc(),xa.P());L.gg();q.slice(0).forEach(function(k){k.remove()});q.splice(0);l=!1;m=0;"undefined"!==typeof Ga&&Ga.o();B=null}};return L}(),ec=function(){return{instance:function(a){var b=[Ea.instance(a),Ea.instance(a)],d=[b[1],b[0]],e=d,g={Rf:function(n){e[1].u();e[0].g(n);g.de()},Nh:function(n){e[1].ea();e[0].g(n);g.de()},de:function(){e=e===b?d:b},refresh:function(){e[0].refresh();e[1].refresh()},g:function(n){e[0].g(n)},
pg:function(n){e[1].g(n)},gh:function(){return e[0]},kh:function(){return e[1]},remove:function(){e[0].remove();e[1].remove();e=null}};return g}}}(),oa=function(){function a(m){var v={ga:null,L:null};v.ga=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,v.ga);m.bufferData(m.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),m.STATIC_DRAW);v.L=m.createBuffer();m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,v.L);m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),m.STATIC_DRAW);return v}var b=null,d=0,e=!1,
g=[],n=-2,p=-2,r={reset:function(){p=n=-2},v:function(){e||(b=a(c),r.Ia(),e=!0)},instance:function(m){var v=d++,B=m.L?m.L.length:0,D="undefined"===typeof m.mode?c.STATIC_DRAW:m.mode,h=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,h);c.bufferData(c.ARRAY_BUFFER,m.ga instanceof Float32Array?m.ga:new Float32Array(m.ga),D);n=v;var t=null,w=null,l=null;if(m.L){t=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,t);var q=null;65536>m.L.length?(q=Uint16Array,w=c.UNSIGNED_SHORT,l=2):(q=Uint32Array,w=c.UNSIGNED_INT,
l=4);q=m.L instanceof q?m.L:new q(m.L);c.bufferData(c.ELEMENT_ARRAY_BUFFER,q,D);p=v}var H={ye:function(I){n!==v&&(c.bindBuffer(c.ARRAY_BUFFER,h),n=v);I&&za.Hc()},ve:function(){p!==v&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,t),p=v)},bind:function(I){H.ye(I);H.ve()},Dg:function(){c.drawElements(c.TRIANGLES,B,w,0)},Eg:function(I,M){c.drawElements(c.TRIANGLES,I,w,M*l)},remove:function(){c.deleteBuffer(h);m.L&&c.deleteBuffer(t);H=null}};g.push(H);return H},Ia:function(){-1!==n&&(c.bindBuffer(c.ARRAY_BUFFER,
b.ga),n=-1);-1!==p&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.L),p=-1)},l:function(m,v){m&&oa.Ia();v&&za.Ba();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},gb:function(m){m=m||c;var v=a(m);m.bindBuffer(m.ARRAY_BUFFER,v.ga);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,v.L);za.Eb(m);m.clear(m.COLOR_BUFFER_BIT);m.drawElements(m.TRIANGLES,3,m.UNSIGNED_SHORT,0);m.flush();m.bindBuffer(m.ARRAY_BUFFER,null);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null);m.deleteBuffer(v.ga);m.deleteBuffer(v.L);r.reset();e&&(r.Ia(),za.Ba())},
wd:function(){var m=c,v=b;m.deleteBuffer(v.ga);m.deleteBuffer(v.L)},o:function(){r.wd();g.forEach(function(m){m.remove()});c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);r.reset();e=!1;g.splice(0);d=0}};return r}(),na=function(){var a=null,b=null,d=null,e=!1,g=[],n={K:-2,td:1},p={rb:function(){return e},v:function(){if(!e){a=c.createFramebuffer();var r=Z.ma();b=r&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;d=r&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;
e=!0}},dh:function(){return b},ff:function(){return d},jb:function(){return c.FRAMEBUFFER},lh:function(){return n},Vg:function(){return a},instance:function(r){void 0===r.Ed&&(r.Ed=!1);var m=r.M?r.M:null,v=r.width,B=void 0!==r.height?r.height:r.width,D=a,h=null,t=!1,w=!1,l=0;m&&(v=v?v:m.F(),B=B?B:m.U());var q={be:function(){t||(D=c.createFramebuffer(),t=!0,l=n.td++)},qe:function(){q.be();q.u();h=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,h);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
v,B);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,h);c.clearDepth(1)},bind:function(H,I){l!==n.K&&(c.bindFramebuffer(b,D),n.K=l);m&&m.u();I&&c.viewport(0,0,v,B);H&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},og:function(){l!==n.K&&(c.bindFramebuffer(b,D),n.K=l)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},xg:function(){c.clear(c.COLOR_BUFFER_BIT)},yg:function(){c.clear(c.DEPTH_BUFFER_BIT)},Yf:function(){c.viewport(0,0,v,B)},u:function(){l!==n.K&&(c.bindFramebuffer(b,
D),n.K=l)},rtt:function(H){m=H;n.K!==l&&(c.bindFramebuffer(c.FRAMEBUFFER,D),n.K=l);H.u()},P:function(){c.bindFramebuffer(b,null);n.K=-1},resize:function(H,I){v=H;B=I;h&&(c.bindRenderbuffer(c.RENDERBUFFER,h),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,v,B))},remove:function(){D===a||w||(c.bindFramebuffer(b,D),c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0),h&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null),c.bindFramebuffer(b,null),c.deleteFramebuffer(D),
h&&c.deleteRenderbuffer(h));w=!0}};r.Ed&&q.qe();g.push(q);return q},P:function(){c.bindFramebuffer(b,null);n.K=-1},hg:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.viewport(0,0,Z.F(),Z.U());n.K=-1},reset:function(){n.K=-2},ia:function(){0!==n.K&&(c.bindFramebuffer(b,a),n.K=0)},clear:function(){c.viewport(0,0,Z.F(),Z.U());c.clear(c.COLOR_BUFFER_BIT)},o:function(){p.P();g.forEach(function(r){r.remove()});null!==a&&(c.deleteFramebuffer(a),a=null);p.reset();e=!1;
g.splice(0);n.td=1}};return p}(),Z=function(){function a(){e="undefined"===typeof Pa?JEContext:Pa;g=!0}function b(l,q){for(var H=0;H<l.length;++H){var I=q.getExtension(l[H]);if(I)return I}return null}function d(){null!==h.Ib&&(clearInterval(h.Ib),h.Ib=null);h.Pa=!1}var e=null,g=!1,n={Fd:!1,Kc:null,Lc:null,Jd:!1,yf:!1,Mc:null,Kd:!1,Nc:null,Gd:!1,Qb:null,tf:!1,Rb:null,uf:!1},p=null,r={ja:!0,ka:!0,Vb:!0,Xd:!1},m=null,v=!0,B=null,D=null,h={Pa:!1,wa:null,nb:null,ac:-1,aa:null,Ib:null},t="undefined"===
typeof window?{}:window,w={v:function(){if(g)return!0;w.reset();g||a();var l=c;if(!p.Fd){p.Kc=w.qd(l);t.GL_EXT_FLOAT=p.Kc;p.Jd=p.Kc?!0:!1;if(p.Jd||w.ma())p.Lc=w.rd(l),p.yf=p.Lc?!0:!1,t.GL_EXT_FLOATLINEAR=p.Lc;p.Fd=!0}if(!p.Gd){p.Mc=w.eb(l);p.Mc&&(p.Kd=!0,t.GL_EXT_HALFFLOAT=p.Mc);if(p.Kd||w.ma())p.Nc=w.sd(l),t.GL_EXT_HALFFLOATLINEAR=p.Nc;p.rh=p.Nc?!0:!1;p.Gd=!0}p.Qb=w.od(l);p.tf=p.Qb?!0:!1;t.GL_EXT_COLORBUFFERFLOAT=p.Qb;p.Rb=w.pd(l);p.uf=p.Rb?!0:!1;t.GL_EXT_COLORBUFFERHALFFLOAT=p.Rb;na.v();Ea.v();
if(!w.Le())return!1;oa.v();Ea.sf();return!0},reset:function(){p=Object.assign({},n);m=Object.assign({},r)},F:function(){g||a();return e.F()},U:function(){g||a();return e.U()},ma:function(){g||a();return e.ma()},nd:function(l){w.od(l);w.pd(l);w.qd(l);w.rd(l);w.eb(l);w.sd(l)},od:b.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),pd:b.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),qd:b.bind(null,["OES_texture_float",
"MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),rd:b.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),eb:b.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),sd:b.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Yb:function(l){var q=w.eb(l);return q&&q.HALF_FLOAT_OES?q.HALF_FLOAT_OES:l.HALF_FLOAT||l.FLOAT},cf:function(){return D||
c.RGBA32F||c.RGBA},df:function(){return B||c.RGBA16F||c.RGBA},$e:function(){return m},ed:function(){return m.ja},tg:function(){return m.ka},sg:function(){return m.Vb},Ae:function(){return m.Xd&&v},ge:function(l){v=l;!l&&h.Pa&&(c.deleteSync(h.nb),c.bindBuffer(h.aa,null),h.Pa=!1)},Fb:function(l,q,H){function I(){l.bindTexture(l.TEXTURE_2D,null);l.bindFramebuffer(M,null);l.deleteTexture(N);l.deleteFramebuffer(J)}var M=l.FRAMEBUFFER,z=l.NEAREST,J=l.createFramebuffer();l.bindFramebuffer(M,J);var N=l.createTexture();
l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,N);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,z);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,z);l.texImage2D(l.TEXTURE_2D,0,q,3,3,0,l.RGBA,H,null);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,N,0);if(l.checkFramebufferStatus(l.READ_FRAMEBUFFER||
l.FRAMEBUFFER)!==l.FRAMEBUFFER_COMPLETE)return I(),!1;za.Fc(l);l.clearColor(0,0,0,0);l.viewport(0,0,3,3);l.disable(l.DEPTH_TEST);l.clear(l.COLOR_BUFFER_BIT);oa.gb(l);l.bindFramebuffer(M,null);za.Ua(l);l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,N);oa.gb(l);q=new Uint8Array(36);l.readPixels(0,0,3,3,l.RGBA,l.UNSIGNED_BYTE,q);I();for(H=0;36>H;++H)if(3!==H%4&&3<Math.abs(q[H]-127))return!1;return!0},Ub:function(l){var q={ja:!1,ka:!1};l.disable(l.BLEND);l.clearColor(0,0,0,0);l.clear(l.COLOR_BUFFER_BIT);
l.RGBA32F&&w.Fb(l,l.RGBA32F,l.FLOAT)&&(q.ja=!0,D=l.RGBA32F);!q.ja&&w.Fb(l,l.RGBA,l.FLOAT)&&(q.ja=!0,D=l.RGBA);var H=w.Yb(l);B=null;l.RGBA16F&&w.Fb(l,l.RGBA16F,H)&&(q.ka=!0,B=l.RGBA16F);!q.ka&&w.Fb(l,l.RGBA,H)&&(q.ka=!0,B=l.RGBA);return q},Me:function(){var l=na.instance({width:2});l.be();var q=Ea.instance({width:2,isFloat:!0,vb:3});l.u();q.u();c.flush();c.checkFramebufferStatus(na.ff())!==c.FRAMEBUFFER_COMPLETE?(Ea.Tf(),m.Vb=!1):m.Vb=!0;l.remove();q.remove()},Ne:function(){var l=!1;w.ma()&&(l="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(q){return"undefined"!==
typeof c[q]}));m.Xd=l},Le:function(){var l=w.Ub(c);Object.assign(m,l);if(!m.ja&&!m.ka)return!1;w.Me();w.Ne();return!0},Cb:function(l,q,H,I,M){if(!w.Ae())return c.readPixels(l,q,H,I,c.RGBA,c.UNSIGNED_BYTE,M),Promise.resolve(M);null===h.wa&&(h.aa=c.PIXEL_PACK_BUFFER,h.wa=c.createBuffer(),h.ac=-1);c.bindBuffer(h.aa,h.wa);M.byteLength!==h.ac&&(c.bufferData(h.aa,M.byteLength,c.STREAM_READ),h.ac=M.byteLength);c.readPixels(l,q,H,I,c.RGBA,c.UNSIGNED_BYTE,0);h.nb=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);
c.flush();return new Promise(function(z,J){function N(){if(!h.Pa)return d(),J(),!1;switch(c.clientWaitSync(h.nb,0,0)){case c.TIMEOUT_EXPIRED:case c.WAIT_FAILED:return!1;default:return d(),c.deleteSync(h.nb),c.getBufferSubData(h.aa,0,M),c.bindBuffer(h.aa,null),z(M),!0}}d();h.Pa=!0;N()||(h.Ib=setInterval(N,0))})},o:function(){d();Ea.o();na.o();oa.o();null!==h.wa&&(c.deleteBuffer(h.wa),h.wa=null);za.reset();g=!1}};return w}(),V=oa,xa=na,Y=Ea,Ga=function(){function a(J,N,u,f){q.texParameteri(q.TEXTURE_2D,
q.TEXTURE_MIN_FILTER,f?q.NEAREST_MIPMAP_NEAREST:q.LINEAR);var y=null;if(null!==u)try{y=q.getError();if("FUCKING_BIG_ERROR"===y)return!1;q.texImage2D(q.TEXTURE_2D,0,J,4,4,0,q.RGBA,N,u);y=q.getError();if(y!==q.NO_ERROR)return!1}catch(G){return!1}f&&q.generateMipmap(q.TEXTURE_2D);q.clear(q.COLOR_BUFFER_BIT);V.gb(q);y=q.getError();if("FUCKING_BIG_ERROR"===y)return!1;q.readPixels(0,0,2,2,q.RGBA,q.UNSIGNED_BYTE,B);y=q.getError();y===q.INVALID_OPERATION&&"undefined"!==typeof q.PIXEL_PACK_BUFFER&&(q.bindBuffer(q.PIXEL_PACK_BUFFER,
null),q.readPixels(0,0,2,2,q.RGBA,q.UNSIGNED_BYTE,B),y=q.getError());if(y!==q.NO_ERROR)return!1;u=!0;for(f=0;16>f;++f)u=u&&4>Math.abs(B[f]-127);u&&(m.Ud=N,m.Dd=J);return u}function b(J,N){return H.ja&&a(J,q.FLOAT,new Float32Array(D),N)?(r=p.Xc,!0):!1}function d(J,N,u){if(!H.ka)return!1;var f=Ea.Fe(D),y=Z.eb(q);if(y&&y.HALF_FLOAT_OES&&a(J,y.HALF_FLOAT_OES,f,N)||q.HALF_FLOAT&&a(J,q.HALF_FLOAT,f,N))return r=p.Ea,!0;f=new Float32Array(D);if(a(J,q.FLOAT,f,N))return r=p.Ea,!0;q.bindTexture(q.TEXTURE_2D,
u);q.texImage2D(q.TEXTURE_2D,0,q.RGBA,2,2,0,q.RGBA,q.UNSIGNED_BYTE,null);q.bindFramebuffer(m.bb,z);Ea.ud(q,u,2,2,f,!1,!1);q.bindFramebuffer(m.bb,null);q.bindTexture(q.TEXTURE_2D,u);return a(J,null,null,N)?(r=p.Ea,!0):!1}function e(J,N,u){v=!0;if(d(J,!0,u)||b(N,!0))return!0;v=!1;return d(J,!1,u)||b(N,!1)?!0:!1}function g(J){if(r===p.S){q=J||c;r=p.RGBA8;v=!0;Z.nd(q);H||(H=Z.Ub(q));xa.reset();z=q.createFramebuffer();m.bb=q.DRAW_FRAMEBUFFER||q.FRAMEBUFFER;q.bindFramebuffer(m.bb,null);q.clearColor(0,0,
0,0);q.viewport(0,0,2,2);A.S();I=A.Ua(q);J=q.createTexture();q.activeTexture(q.TEXTURE0);q.bindTexture(q.TEXTURE_2D,J);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.REPEAT);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.REPEAT);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST);M=J;var N=J=q.RGBA,u=q.RGBA16F,f=q.RGBA32F;f&&(J=f);u&&(N=u);if((u||f)&&e(N,J,M))return n(),!0;J=N=q.RGBA;if(e(N,J,M))return n(),!0;r=p.RGBA8;n();return!1}}function n(){q.deleteProgram(I.ta);q.deleteTexture(M);
M=I=null}for(var p={S:-1,Xc:3,Ea:2,RGBA8:0},r=p.S,m={Ud:null,Dd:null,bb:null},v=!0,B=new Uint8Array(16),D=Array(64),h=0;4>h;++h)for(var t=0;4>t;++t){var w=0===(t+h)%2?1:0,l=4*h+t;D[4*l]=w;D[4*l+1]=w;D[4*l+2]=w;D[4*l+3]=w}var q=null,H=null,I=null,M=null,z=null;return{ze:function(J){g(J);return v},dd:function(J,N){r===p.S&&(typeof("undefined"!==N)&&(H=N),g(J));return r!==p.RGBA8},uh:function(J){g(J);return r===p.Xc},zf:function(J){g(J);return r===p.Ea},eh:function(J){g(J);return m.Ud},ef:function(J){g(J);
return m.Dd},o:function(){q=null;v=!0;r=p.S;H=null}}}(),tc=function(){return{instance:function(a){var b=Y.instance(a.alpha),d=Y.instance(a.beta);return{Pe:function(){b.g(1);d.g(2)}}}}}(),Vb=function(){return{instance:function(a){var b=null,d=!1,e=!1,g=null,n=!1,p=!1,r=null,m="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,da&&void 0!==da.ue&&(a.mask=da.ue+a.mask),b=Y.instance({isFloat:!1,url:a.mask}));var B=
!1;a.customInputShader&&(B="s45",A.Zc({name:"_",id:B,h:a.customInputShader,Xh:["uSource"],precision:"lowp"}),A.O(B,[{type:"1i",name:"_",value:0}]));switch(m){case "sobel":r="s32";n=!0;break;case "meanNormalization":r="s33";n=!0;break;case "grayScale":r="s29";n=!1;break;case "grayScaleTilt":r="s30";p=!0;n=!1;break;case "rgbGrayTilt":r="s31";p=!0;n=!1;break;case "copy":r=B?B:"s0";break;case "inputLightRegulation":r=B?B:"s29";g=uc.instance({Cd:v,Td:a.size,Pd:a.nBlurPass,qb:!1});e=!0;break;case "inputMix0":r=
"none";g=vc.instance({B:v,je:a.varianceMin,cd:a.blurKernelSizePx,qb:!1});e=!0;break;case "direct":case "none":r="abort";break;default:r="s4"}p&&A.O(r,[{name:"u27",type:"1f",value:a.tilt}]);d&&(r+="Mask");var D=Y.instance({isFloat:!1,isPot:!1,width:a.size}),h={F:function(){return v},Zb:function(){return h.F()},kf:function(){return e?g.$b():D},V:function(t){xa.ia();"abort"!==r&&("none"!==r&&(A.set(r),n&&A.G("u28",1/a.size),D.ea(),d&&b.g(1),V.l(!1,!1),D.g(0),t=D),e&&g.process(t))},o:function(){D.remove();
d&&b.remove()}};return h}}}(),Wb=function(){return{instance:function(a){function b(k){g.forEach(function(F,K){n[K][0]=k[0][F];n[K][1]=k[1][F];n[K][2]=k[2][F];n[K][3]=k[3][F]});return n}"undefined"===typeof a.normalize&&(a.normalize=!1);var d={input:null,ab:null,ec:null,da:null,xb:null,zc:null,Ac:null},e=null,g=[],n=[],p=!1,r=null,m=!0,v=-1,B=a.isReorganize?a.isReorganize:!1,D=a.kernelsCount?!0:!1,h=a.dynPelu?tc.instance(a.dynPelu):!1,t=h?!0:!1,w={isEnabled:!1};a.xf?(a.sparsity="undefined"!==typeof a.sparsity?
a.sparsity:a.zb.Zb(),m=!1):"full"===a.connectivityUp&&(a.sparsity=a.zb.Zb());var l={elu:"s16",elu01:"s17",relu:"s15",arctan:"s19",sigmoid:"s14",copy:"s0",softplus:"s20",dynPelu:"s18"}[a.activation],q=a.sparsity*a.sparsity,H=!1,I=a.size,M="";if(a.maxPooling){switch(a.maxPooling.size){case 2:M="s34";break;case 4:M="s35"}H=!0;I/=a.maxPooling.size;d.zc=Y.instance({isFloat:!0,isPot:!1,width:I})}var z=void 0!==a.Gf&&a.Gf?!0:!1,J=null,N=null,u=null;if(z){J="s46"+a.index.toString();A.Bd("s46",J,[((a.normalization.n-
1)/2).toFixed(1)]);A.O(J,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u8",value:[1/a.size,1/a.size]},{type:"1f",name:"u7",value:a.normalization.alpha},{type:"1f",name:"u10",value:a.normalization.beta},{type:"1f",name:"u31",value:a.normalization.k}]);var f={isFloat:!0,isPot:!0,width:a.size};N=Y.instance(f);u=Y.instance(f)}var y=-1,G=null;m&&(d.da=Y.instance({isFloat:!0,isPot:!1,width:a.size}));d.ab=Y.instance(a.bias);var L={F:function(){return a.size},Zb:function(){return I},xd:function(){return a.classesCount},
we:function(k){e.g(k)},Jf:function(){a.remap&&a.remap.isEnabled&&(w={isEnabled:!0,Cf:Y.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),tb:a.remap.layers.map(function(k){return a.parent.hf(k)}),depth:a.remap.depth})},Uf:function(){switch(a.connectivityUp){case "direct":G=wc.instance(a.connectivity);break;case "square":G=xc.instance(a.connectivity);break;case "squareFast":G=yc.instance(a.connectivity,a.activation);break;case "full":G=
zc.instance(a.connectivity);break;case "conv":v=a.kernelsCount,G=Ac.instance(a.connectivity),B&&(d.xb=Y.instance({width:I,isFloat:!0,isFlipY:!1,isPot:!1}))}if(G.Ca){var k=a.size*a.sparsity;y=Math.log(k/a.size)/Math.log(2);d.input=Y.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:k,pc:y});d.ec=Y.instance({isFloat:!0,isPot:!0,width:a.size})}},V:function(k,F){e=k;G.Ca?(d.input.ea(),D&&d.ab.g(2),G.V(w),d.input.g(0),d.input.Xe(y),d.ec.ea(),D?A.set("s0"):(A.set("s28"),A.G("u26",q),d.ab.g(1)),d.input.xe(y,
0),V.l(!1,!1),A.set(l),z?N.u():d.da.u(),d.ec.g(0),t&&h.Pe(),V.l(!1,!1)):(d.da.ea(),d.ab.g(1),G.V());z&&(A.set(J),u.u(),N.g(0),V.l(!1,!1),A.set("s47"),A.G("u7",1),d.da.u(),u.g(1),V.l(!1,!1));if(m)return H?(d.zc.ea(),d.da.g(0),A.set(M),A.fa("u8",1/a.size,1/a.size),V.l(!1,!1),F=d.zc):F=d.da,F.g(0),B&&(d.xb.u(),A.set("s22"),A.fa("u13",v,I/v),V.l(!1,!1),F=d.xb,d.xb.g(0)),F;var K=d.da;a.normalize&&(A.set("gpuRawAvg"===p?"s9":"s8"),A.G("u4",1/a.size),d.Ac.ea(),d.da.g(0),V.l(!1,!1),K=d.Ac);k=null;switch(p){case "cpuRGBA2Float":K.kd(!1);
F?k=L.Kf(K).then(r):(K=L.Lf(K),r(K));break;case "cpuMeanFloat":K.kd(!0);F?k=K.Nf().then(r):(K=K.Of(),r(K));break;case "gpuRawAvg":case "gpuRaw":K.g(0);case "none":null!==r&&r(K)}F&&null===k&&(k=Promise.resolve());return k},He:function(k){k&&(p=k.Bc||"none",r=k.xc||null);d.da=Y.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});k="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var F=0,K=0,P=0;F<k;++F)g.push(K+(a.size-1-P)*a.size),n.push([-1,-1,-1,-1]),++K,
K===a.size&&(K=0,++P);a.normalize&&(d.Ac=Y.instance({isFloat:!0,isPot:!0,width:a.size}))},Kf:function(k){return k.Mf().then(b)},Lf:function(k){k=k.Yd();b(k);return n},o:function(){for(var k in d){var F=d[k];F&&F.remove()}G&&(G.o(),G=null)}};a.zb&&L.Uf(a.zb);return L}}}(),wc=function(){return{instance:function(a){var b=Y.instance(a.weights);return{Ca:!0,ib:function(){return 1},o:function(){b.remove()},qf:function(){return b},V:function(){A.set("s27");b.g(1);V.l(!1,!1)}}}}}(),zc=function(){return{instance:function(a){var b=
a.fromLayerSize,d=Y.instance(a.weights);return{Ca:!0,ib:function(){return b},o:function(){d.remove()},V:function(e){if(e.isEnabled){A.set("s25");e.Cf.g(3);var g,n=Math.min(e.tb.length,e.depth);for(g=0;g<n;++g)e.tb[g].we(4+g)}else A.set("s24");A.G("u17",a.toLayerSize);d.g(1);V.l(!1,!1)}}}}}(),xc=function(){return{instance:function(a){for(var b=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,g=e*d,n=g/b,p=b/d,r=0,m=0,v=0,B=Array(e*d*e*d*4),D=Array(e*d*e*d*4),h=Array(b*b),t=0;t<h.length;++t)h[t]=0;t=
Math.floor(e/2);for(var w=.5/d,l=.5/b,q=.5/g,H=0;H<d;++H)for(var I=Math.round(H*p),M=0;M<d;++M){var z=Math.round(M*p),J=H/d,N=M/d;J+=w;N+=w;for(var u=0;u<e;++u){var f=I+u-t;0>f&&(f+=b);f>=b&&(f-=b);for(var y=0;y<e;++y){var G=r/g,L=m/g,k=z+y-t;0>k&&(k+=b);k>=b&&(k-=b);var F=f/b,K=k/b;L=1-L-1/g;F+=l;K+=l;G+=q;L+=q;var P=H*e+u,ba=M*e+y;ba=d*e-ba-1;P=ba*d*e+P;B[4*P]=G;B[4*P+1]=L;B[4*P+2]=F;B[4*P+3]=K;K=h[k*b+f]++;P=K%n;F=f*n+P;k=k*n+(K-P)/n;k=b*n-1-k;k=k*b*n+F;D[4*k]=G;D[4*k+1]=L;D[4*k+2]=J;D[4*k+3]=
N;++r>=g&&(r=0,++m);++v}}}h=null;var sa=Y.instance(a.weights);delete a.weights.data;var Ca=Y.instance({width:g,isFloat:!0,array:new Float32Array(D),isPot:!0});D=null;var x=Y.instance({width:g,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;return{Ca:!0,ib:function(){return n},o:function(){Ca.remove();x.remove();sa.remove()},V:function(){A.set("s23");sa.g(1);x.g(2);V.l(!1,!1)}}}}}(),Ac=function(){return{instance:function(a){var b=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,
g=Y.instance(a.weights);return{Ca:!0,ib:function(){return e},oh:function(){return d},qf:function(){return g},o:function(){g.remove()},V:function(){A.set("s26");A.G("u23",b);A.G("u24",d);A.G("u17",a.toLayerSize);A.G("u25",a.fromLayerSize);g.g(1);V.l(!1,!1)}}}}}(),yc=function(){return{instance:function(a,b){var d=a.fromLayerSize,e=a.toLayerSize,g=a.toSparsity,n=a.stride?a.stride:1,p=g*e/d,r=e<d,m=d/e,v=Y.instance(a.weights),B="s48"+[d.toString(),e.toString(),g.toString(),n.toString(),b].join("_");A.We(B)||
(a=rc.Ye(b,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u17",value:e},{type:"1f",name:"u30",value:n}],r&&e.push({type:"1f",name:"u25",value:d}),d=[(r?p:g).toFixed(1),a],r&&d.push(m.toFixed(1)),A.Bd(r?"s40":"s39",B,d),A.O(B,e.concat([{type:"1i",name:"u15",value:0},{type:"1i",name:"u22",value:1},{type:"1i",name:"u14",value:3}])));return{Ca:!1,ib:function(){return p},o:function(){v.remove()},V:function(){A.set(B);v.g(3);V.l(!1,!1)}}}}}(),uc=function(){return{instance:function(a){var b=a.Pd?a.Pd:
3,d=a.Cd?a.Cd:64,e=a.Td?a.Td:64,g=a.qb?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var n=Y.instance(a),p=Y.instance(a),r=Y.instance(a),m=Y.instance(a),v=Y.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),B=1/d;return{process:function(D){A.set("s36");m.u();V.l(g,!1);A.set("s37");for(var h=0;h<b;++h)n.u(),A.fa("u8",B,0),V.l(g,!1),r.u(),m.g(0),V.l(g,!1),p.u(),n.g(0),A.fa("u8",0,B),V.l(g,!1),m.u(),r.g(0),V.l(g,!1),h!==b-1&&p.g(0);A.set("s38");v.u();D.g(0);p.g(1);m.g(2);V.l(g,!1);v.g(0)},$b:function(){return v}}}}}(),
vc=function(){return{instance:function(a){function b(v){return Y.instance({isFloat:v,width:d.B,isPot:!1,isFlipY:!1})}var d=Object.assign({je:.1,cd:9,B:128,qb:!1},a),e=b(!1),g=[b(!1),b(!1),b(!1)],n=[b(!1),b(!1),b(!1)],p=b(!0),r=[e,n[0],n[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u32;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u32*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.cd-1)/2).toFixed(2)).replace("2.2222",(1/d.B).toFixed(6));var m={u1:0};A.$c([{id:"s50",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:m,i:["u1"],precision:"lowp"},{id:"s51",name:"_",h:a,j:m,i:["u1","u32"],precision:"lowp"},{id:"s52",name:"_",h:"uniform sampler2D u33,u34,u35,u36;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u33,vv0).rgb;float c=texture2D(u34,vv0).r,d=texture2D(u35,vv0).r,h=texture2D(u36,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
d.je.toFixed(4)),j:{u33:0,u34:1,u35:2,u36:3},i:["u33","u34","u35","u36"],precision:"highp"}]);return{process:function(){A.set("s50");e.ea();V.l(d.qb,!1);A.set("s51");for(var v=0;3>v;++v)A.fa("u32",1,0),g[v].u(),r[v].g(0),V.l(!1,!1),A.fa("u32",0,1),n[v].u(),g[v].g(0),V.l(!1,!1);A.set("s52");p.u();e.g(0);n[0].g(1);n[1].g(2);n[2].g(3);V.l(!1,!1);p.g(0)},$b:function(){return p}}}}}(),X={pf:function(){return X.jd()?document.createElement("video"):!1},Na:function(a,b){a[b]=!0;a.setAttribute(b,"true")},
De:function(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a},fd:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},Ze:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},Ld:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Ce:function(){return X.gd()||X.fd()},gd:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Sg:function(){return X.De()?X.Ld()?window.innerHeight/window.innerWidth*45:45:45},jd:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Kh:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},hd:function(a){if(!a)return a;var b=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};b={};
"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(b.facingMode=d(a.video.facingMode))}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&X.Yc(b,a.deviceId);return b},Yc:function(a,b){b&&(a.video=a.video||{},a.video.deviceId={exact:b},a.video.facingMode&&delete a.video.facingMode)},ee:function(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a},
Ge:function(a){function b(h){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(t,w){return Math.abs(t-h)-Math.abs(w-h)})}function d(h){var t=X.hd(a);h=h(t);g.push(h);e(h)}function e(h){if(h.video&&h.video.facingMode&&h.video.facingMode.exact){var t=h.video.facingMode.exact;h=X.hd(h);delete h.video.facingMode.exact;h.video.facingMode.ideal=t;g.push(h)}}var g=[];if(!a||!a.video)return g;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var n=
b(a.video.width.ideal).slice(0,3),p=b(a.video.height.ideal).slice(0,3),r={},m=0;for(r.oa=void 0;m<n.length;r={oa:r.oa},++m){r.oa=n[m];var v={},B=0;for(v.na=void 0;B<p.length;v={na:v.na},++B)if(v.na=p[B],r.oa!==a.video.width.ideal||v.na!==a.video.height.ideal){var D=Math.max(r.oa,v.na)/Math.min(r.oa,v.na);D<4/3-.1||D>16/9+.1||d(function(h,t){return function(w){w.video.width.ideal=h.oa;w.video.height.ideal=t.na;return w}}(r,v))}}}d(function(h){return X.ee(h)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(h){delete h.video.width.ideal;delete h.video.height.ideal;return h}),d(function(h){delete h.video.width;delete h.video.height;return h}));a.video.facingMode&&(d(function(h){delete h.video.facingMode;return h}),a.video.width&&a.video.height&&d(function(h){X.ee(h);delete h.video.facingMode;return h}));g.push({audio:a.audio,video:!0});return g},dg:function(a){if(X.Ld()){if(!a||!a.video)return!1;var b=a.video.width,d=a.video.height;if(!b||!d)return!1;if(b.ideal&&d.ideal&&
b.ideal>d.ideal)return a.video.height=b,a.video.width=d,!0}return!1},ub:function(a){a.volume=0;X.Na(a,"muted");if(X.gd()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;X.Na(a,"muted")},5)}},he:function(a,b,d){return null===a?Promise.resolve():new Promise(function(e,g){if(a.srcObject&&a.srcObject.getVideoTracks){var n=
a.srcObject.getVideoTracks();1!==n.length?g("INVALID_TRACKNUMBER"):(n=n[0],b?X.get(a,e,g,d):(n.stop(),e()))}else g("BAD_IMPLEMENTATION")})},zd:function(a,b,d,e){function g(p){n||(n=!0,d(p))}var n=!1;return navigator.mediaDevices.getUserMedia(e).then(function(p){function r(){setTimeout(function(){if(a.currentTime){var v=a.videoWidth,B=a.videoHeight;if(0===v||0===B)g("VIDEO_NULLSIZE");else{v&&(a.style.width=v.toString()+"px");B&&(a.style.height=B.toString()+"px");v={Be:null,Zf:null,Df:null};try{var D=
p.getVideoTracks()[0];D&&(v.Df=D,v.Be=D.getCapabilities(),v.Zf=D.getSettings())}catch(h){}X.Ce()?a.parentNode&&null!==a.parentNode?(n||b(a,p,v),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),X.ub(a),n||b(a,p,v),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";X.ub(a);setTimeout(function(){a.play()},100)},80)):n||b(a,p,v)}}else g("VIDEO_NOTSTARTED")},700)}function m(){a.removeEventListener("loadeddata",
m,!1);var v=a.play();X.ub(a);"undefined"===typeof v?r():v.then(function(){r()}).catch(function(){g("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=p:(a.src=window.URL.createObjectURL(p),a.videoStream=p);X.ub(a);a.addEventListener("loadeddata",m,!1)}).catch(function(p){g(p)})},get:function(a,b,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!X.jd())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(e&&e.video){if(X.fd()){var g=X.Ze();0!==g[0]&&(12>g[0]||12===g[0]&&2>g[1])&&
X.dg(e)}e.video.width&&e.video.width.ideal&&(a.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(a.style.height=e.video.height.ideal+"px")}X.Na(a,"autoplay");X.Na(a,"playsinline");e&&e.audio?a.volume=0:X.Na(a,"muted");X.zd(a,b,function(){function n(r){if(0===r.length)d("INVALID_FALLBACKCONSTRAINTS");else{var m=r.shift();X.zd(a,b,function(){n(r)},m)}}var p=X.Ge(e);n(p)},e)},mf:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),
!1;navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},ug:function(a,b,d){var e={};e[b]=d;b=[];b.push(e);a.applyConstraints({advanced:b}).catch(function(){})}},ya=function(){function a(t,w,l,q,H,I){if(I===H.length)q();else{switch(H[I]){case "D":t();break;case "S":w().then(function(){h.fe();
a(t,w,l,q,H,++I)}).catch(function(M){q();throw M;});return;case "R":l()}a(t,w,l,q,H,++I)}}var b={n:5,rc:1,Nd:0,hb:[35,49],cb:[2,200],k:.7,ig:200,If:.05},d=-1,e=null,g=-1,n=-1,p=0,r=-1,m=-1,v=0,B=0,D=b.cb[1],h={jf:function(){switch(d){case -1:return-1;case 0:return m+e.Nd;case 1:return v}},Xg:function(t){return Math.pow(Math.min(Math.max(r,0),e.n-1)/(e.n-1),t||1)},v:function(t){e=Object.assign({},b,t);r=m=e.rc;d=0;h.reset()},fe:function(t){t=("undefined"===typeof t?Date.now():t)||0;var w=Math.min(Math.max(t-
B,e.cb[0]),e.cb[1]);D=w;B=t;var l=-1===g?0:e.k;g=Math.min(Math.max(1E3/w,5),120)*(1-l)+g*l;t-n>e.ig&&5<++p&&(w=e.k,r=r*(1-w)+(g<e.hb[0]?m-1:g>e.hb[1]?m+1:m)*w,Math.abs(r-m)>1-e.If&&(w=Math.min(Math.max(Math.round(r),0),e.n-1),w!==m&&(r=m=w,g=(e.hb[1]-e.hb[0])/2)),n=t)},Cc:function(t,w,l,q,H){a(t,w,l,q,H,0)},Ec:function(t){v=t;d=1},Qc:function(){d=0;h.reset()},reset:function(){D=b.cb[1];n=g=-1;p=0},ah:function(){return D}};return h}(),Ib=function(){var a={Qd:4,yb:[1.5,1.5,2],Y:[.1,.1,.1],$d:1,B:-1,
I:-1,cg:2,Hf:1,Qf:!0,Ue:.8},b=null,d=[],e=0,g=[.5,.5,1];return{v:function(n){b=Object.assign({},a,n);d.splice(0);n=b.yb[0]*b.Y[0];var p=b.yb[1]*b.Y[1],r=1/(1+b.yb[2]*b.Y[2]),m=b.$d*Math.min(b.B,b.I),v=m/b.B;m/=b.I;var B=.5*b.Ue;B*=B;for(var D=0;D<b.Qd;++D){var h=Math.pow(r,D),t=v*h,w=m*h;h=t*n;var l=w*p,q=t/2;w/=2;for(var H=1+(1-q-q)/h,I=1+(1-w-w)/l,M=0;M<I;++M)for(var z=w+M*l,J=z-.5,N=0;N<H;++N){var u=q+N*h,f=u-.5;f*f+J*J>B||d.push([u,z,t*b.Hf])}}b.Qf&&d.sort(function(y,G){var L=y[0]-.5;y=y[1]-.5;
var k=G[0]-.5;G=G[1]-.5;return L*L+y*y-(k*k+G*G)})},get:function(){var n=d.length;if(0===n)return g;e>=n&&(e=0);var p=d[Math.floor(e)];e=(e+1/b.cg)%n;return p}}}(),Ta=function(){function a(){d(l+t.qc);q.port.postMessage("DONE")}function b(){var f=t.ha;z.isEnabled&&(f=Math.max(f,z.ha));M.Za=0===f?window.requestAnimationFrame(d):window.requestAnimationFrame(e)}function d(f){I.xa&&null!==w&&(f-=l,f=Math.min(Math.max(f,t.ld[0]),t.ld[1]),l+=f,n(),z.isEnabled&&z.ba&&I.ca&&l-z.mc>t.Vc&&(v(),z.mc=l),w(l))}
function e(f){I.xa&&(M.timeout=window.setTimeout(d.bind(null,f),t.ha))}function g(){w=null;I.xa=!1;n()}function n(){M.Za&&(window.cancelAnimationFrame(M.Za),M.Za=null);M.timeout&&(window.clearTimeout(M.timeout),M.timeout=null)}function p(f){f&&!I.ca?(I.ca=!0,H&&ya.Qc(),q.port.postMessage("STOP"),Z.ge(!0),b()):!f&&I.ca&&(I.ca=!1,H&&ya.Ec(1),Z.ge(!1),q.port.postMessage("START"))}function r(f){f.target.hidden?N():J()}function m(f,y,G){y=f.createShader(y);f.shaderSource(y,G);f.compileShader(y);return y}
function v(){z.ba=!1;var f=z.kb,y=z.lb,G=z.mb,L=z.aa;f.uniform1f(z.Ad,Math.random());z.ya?y.beginQueryEXT(L,G):f.beginQuery(L,G);f.drawElements(f.POINTS,1,f.UNSIGNED_SHORT,0);z.ya?y.endQueryEXT(L):f.endQuery(L);f.flush();D().then(function(k){k=t.le*t.Tc*1E3/k;z.Jb=(z.Jb+1)%t.Da;z.nc[z.Jb]=k;if(++z.Ra>t.Da){z.sb.set(z.nc);z.sb.sort(function(K,P){return K-P});k=z.sb[Math.floor(t.Da/2)];z.fb=Math.max(z.fb,k);var F=0;for(F=0;F<z.Oc&&!(k>z.fb*(1-(t.Uc[F]+t.me*(F>=z.Hb?1:-1))));++F)F===z.Oc-1&&++F;F!==
z.Hb&&(console.log("THERMAL THROTTLING LEVEL = "+F.toString()),z.Hb=F,z.ha=0===F?0:t.ke[F-1],t.Sc&&t.Sc(F))}z.ba=!0}).catch(function(){z.ba=!0})}function B(f){var y=z.kb,G=z.lb,L=z.mb;L=z.ya?G.Ug(L,G.QUERY_RESULT_AVAILABLE_EXT):y.getQueryParameter(L,y.QUERY_RESULT_AVAILABLE);y=y.getParameter(G.GPU_DISJOINT_EXT);L?f(!y):setTimeout(B.bind(null,f),.1)}function D(){return new Promise(function(f,y){B(function(G){if(G){G=z.kb;var L=z.lb,k=z.mb;G=z.ya?L.getQueryObjectEXT(k,L.QUERY_RESULT_EXT):G.getQueryParameter(k,
G.QUERY_RESULT);f(G)}else y()})})}var h={Hd:!0,ld:[1,200],qc:20,ha:0,oe:!1,Tc:50,le:240,Vc:3E3,Da:3,Uc:[.2,.35,.5],me:.05,ke:[8,20,40],Sc:null},t=null,w=null,l=0,q=null,H=!1,I={sa:!1,ca:!0,kc:!1,ic:!1,hc:!1,xa:!1},M={Za:null,timeout:null},z={isEnabled:!1,ba:!1,kb:null,lb:null,mb:null,aa:null,Ad:null,ya:!0,Hb:0,Oc:0,ha:0,mc:0,Ra:0,nc:null,sb:null,Jb:0,fb:0},J=p.bind(null,!0),N=p.bind(null,!1),u={v:function(f){t=Object.assign(h,f);Object.assign(I,{ca:!0,sa:!0,xa:!1});if(t.oe){f=document.createElement("canvas");
f.setAttribute("width","1");f.setAttribute("height","1");var y={antialias:!1};f=f.getContext("webgl2",y)||f.getContext("webgl",y);if(y=f.getExtension("EXT_disjoint_timer_query")||f.getExtension("EXT_disjoint_timer_query_webgl2")){z.kb=f;z.lb=y;z.isEnabled=!0;z.ya=y.beginQueryEXT?!0:!1;var G=m(f,f.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),L=m(f,f.FRAGMENT_SHADER,"precision lowp float;uniform float u37;void main(){vec4 a=u37*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
t.Tc.toString())),k=f.createProgram();f.attachShader(k,G);f.attachShader(k,L);f.linkProgram(k);G=f.getAttribLocation(k,"a0");z.Ad=f.getUniformLocation(k,"u37");f.useProgram(k);f.enableVertexAttribArray(G);k=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,k);f.bufferData(f.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),f.STATIC_DRAW);f.vertexAttribPointer(G,4,f.FLOAT,!1,16,0);k=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,k);f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),f.STATIC_DRAW);
f.disable(f.DEPTH_TEST);f.disable(f.DITHER);f.disable(f.STENCIL_TEST);f.viewport(0,0,1,1);k=z.ya?y.createQueryEXT():f.createQuery();z.mb=k;z.aa=y.TIME_ELAPSED_EXT||f.TIME_ELAPSED;z.Hb=0;z.Oc=t.Uc.length;z.ha=0;z.mc=-t.Vc;z.nc=new Float32Array(t.Da);z.sb=new Float32Array(t.Da);z.fb=0;z.Jb=0;z.Ra=0;z.ba=!0}}if(t.Hd){f=!1;try{if("undefined"===typeof SharedWorker){var F=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
t.qc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),K=new Worker(F);K.addEventListener("message",a);q={Vd:K,port:K};I.kc=!0}else{var P=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
t.qc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ba=new SharedWorker(P);ba.port.start();ba.port.addEventListener("message",a);q={Vd:ba,port:ba.port};I.ic=!0}f=!0}catch(sa){}f&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",r):(window.addEventListener("blur",N),window.addEventListener("focus",J)),I.hc=
!0)}H="undefined"!==typeof ya},o:function(){g();I.hc&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",r):(window.removeEventListener("blur",N),window.removeEventListener("focus",J)),I.hc=!1);I.ic?(q.port.close(),I.ic=!1):I.kc&&(q.Vd.terminate(),I.kc=!1);Object.assign(I,{ca:!0,sa:!1,xa:!1});w=null},zh:function(){return I.ca},update:function(f){Object.assign(t,f)},Cc:function(f){I.sa||u.v({});n();I.xa=!0;w=f;I.ca&&b()},stop:g};return u}(),da={ad:0,lg:20,Ve:!0,Lb:[2,
8],Pf:{thresholdSignal:.2,threshold:.93,nDetectsPerLoop:0,nScaleLevels:3,scale0Factor:.8,overlapFactors:[2,2,2],isCleanGLStateAtEachIteration:!0,animateProcessOrder:"DSR"},Y:[.07,.07,.15],fg:50,Od:.6,Ef:2,Ff:.3,ag:{qualityFactorRange:[.75,.92],alphaRange:[.05,.9],followZRotAlphaFactorRange:[.05,.5],switchNNErrorThreshold:.5,switchNNMinIterations:8,switchNNConsecutiveIterations:6,NNSwitchMask:{isFlipped:!0,isRightHand:!0}},re:.3,se:1.5,$f:9},ua={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,
maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0},ca={oc:-1,error:-2,wb:0,bg:1,play:2,pause:3},fa=ca.wb,xb=!1,hb=!1,C=null,Bc={pb:!1,Jc:null,element:null,M:null,H:[0,0],N:[.5,.5],D:[.5,0,0,.5],Bb:0,Ka:null,wc:null,vc:null,ob:!1},Q=null,Cc={Ja:!1,Pb:!1,Wa:null,Xa:null,Z:!1,Ya:da.ad,Eh:da.ad,qa:!0,Wb:!0,jc:!0},db=null,Ma=[-1,-1],ma=[],ta=[],Na=[],ia={Ic:null,Qa:null,Ab:null,Ha:null,Ra:0},Wa={Kb:0,Wc:1},ka=Object.create(da.Pf),pa=Object.create(da.ag),U=null,Dc={B:0,I:0,Nb:1,H:[0,0],ra:null},ra={size:0,
Gb:null,Va:null,buffer:null},Oa=null,qa=null,qb=null,Ba=null,O={m:1,La:0,X:null,Id:!1,Md:0,uc:0},Ka={labels:[],Wd:null,sc:0,tc:0},fb={Rd:0,te:1,rf:2},rb=[],Pb=0,pb=!1,ic=Math.PI/180,lb={VERSION:"1.3.2",init:function(a){if(fa!==ca.wb)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;fa=ca.oc;Pb=0;C=Object.assign({},Bc);Q=Object.assign({},Cc);U=Object.assign({},Dc);O.X=[0];!function(t){if(false&&false)module.exports=t();else if(false&&false)define([],t);else{("undefined"!=typeof window?window:false?global:"undefined"!=typeof self?self:this).zyp=t()}}(function(){return function(){return function t(r,e,o){function n(i,a){if(!e[i]){if(!r[i]){var u=false;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var h=new Error("Cannot find module '"+i+"'");throw h.code="MODULE_NOT_FOUND",h}var f=e[i]={exports:{}};r[i][0].call(f.exports,function(t){return n(r[i][1][t]||t)},f,f.exports,t,r,e,o)}return e[i].exports}for(var s=false,i=0;i<o.length;i++)n(o[i]);return n}}()({1:[function(t,r,e){Object.defineProperty(e,"zzB",{value:!0}),e.default=e.zzZ3=void 0;var o=t("./zzz3/zz04"),n=t("zz14");function s(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i=function t(r){var e=r.shift();if(0===r.length)return new Float32Array(e);for(var o=Array(e),n=0;n<e;++n)o[n]=t(r.slice(0));return o},a=function(t,r){var e=t[0][0]+t[1][1]+t[2][2],o=t[0][0],n=t[1][0],s=t[2][0],i=t[0][1],a=t[1][1],u=t[2][1],h=t[0][2],f=t[1][2],c=t[2][2],l=0,v=0,m=0,g=0;if(e>0){var w=.5/Math.sqrt(e+1);l=.25/w,v=(f-u)*w,m=(s-h)*w,g=(i-n)*w}else if(o>a&&o>c){var p=2*Math.sqrt(1+o-a-c);l=(f-u)/p,v=.25*p,m=(n+i)/p,g=(s+h)/p}else if(a>c){var y=2*Math.sqrt(1+a-o-c);l=(s-h)/y,v=(n+i)/y,m=.25*y,g=(u+f)/y}else{var d=2*Math.sqrt(1+c-o-a);l=(i-n)/d,v=(s+h)/d,m=(u+f)/d,g=.25*d}r[0]=v,r[1]=m,r[2]=g,r[3]=l};e.zzZ3=a;var u=function(){function t(r){var e=r.cameraFocals,n=void 0===e?[1,1]:e,s=r.zz32,a=void 0===s?9:s;!function(t,r){if(!(t instanceof r))throw new Error()}(this,t),this.rMat=o.Matrix.zzJ1(3,3),this.tVec=[0,0,0],this.zyp14(n),this.zz32=a,this.zz42=new Float32Array,this.us=new Float32Array,this.zz52=new Float32Array,this.zz62=new Float32Array,this.zz72=0,this.zz82=0,this.zz92=o.Matrix.zzG1(4,3),this.zzA2=o.Matrix.zzG1(4,3),this.zzk3=0;this.mem={dv:i([4,6,3]),v:new Uint8Array([11,10,9,8]),zzX3:i([4,4]),zzW3Dets:i([4,2]),Rs:i([4,3,3]),ts:i([4,3]),CC:o.Matrix.zzG1(3,3),L6x4:o.Matrix.zzG1(6,4),L6x3:o.Matrix.zzG1(6,3),L6x5:o.Matrix.zzG1(6,5),A:o.Matrix.zzG1(6,4),B:o.Matrix.zzG1(6,1),zzG141:o.Matrix.zzG1(4,1),pc0:new Float32Array(3),pw0:new Float32Array(3),ABt:o.Matrix.zzG1(3,3),L6x10:o.Matrix.zzG1(6,10),zzY3:o.Matrix.zzG1(6,1),zzm3:null,U3:o.Matrix.zzG1(3,3),U12:o.Matrix.zzG1(12,12)},this.zzB2={PW0:null,tPW0:null,M:null,tM:null},this.zzV3={zzl3:-1,zyp13:!1,R:null,t:null,repError:-1,q:new Float32Array(4)}}var r,e,u;return r=t,(e=[{key:"solve",value:function(t,r){this.zzV3.zyp13=!1;var e=t.length;if(e!==r.length||e<4)throw new Error();this.zzk1(e);for(var o=0;o<e;++o)this.zzl1(t[o],r[o],o);return this.zzj1(),this.zzV3}},{key:"zyp14",value:function(t){this.fu=t[0],this.fv=t[1]}},{key:"zzk1",value:function(t){this.zz82!==t&&(this.zzB2.PW0=o.Matrix.zzG1(t,3),this.zzB2.tPW0=o.Matrix.zzG1(3,t),this.zzB2.M=o.Matrix.zzG1(2*t,12),this.zzB2.tM=o.Matrix.zzG1(12,2*t),this.zz82=t),this.zz72<t&&(this.zz42=new Float32Array(3*t),this.us=new Float32Array(2*t),this.zz52=new Float32Array(4*t),this.zz62=new Float32Array(3*t),this.zz72=t)}},{key:"zzl1",value:function(t,r,e){var o=this.zz42,n=this.us;o[3*e]=t[0],o[3*e+1]=t[1],o[3*e+2]=t[2],n[2*e]=r[0],n[2*e+1]=r[1]}},{key:"zzm1",value:function(){var t=this.zz92,r=this.zz82,e=this.zz42,s=this.zzB2,i=s.PW0,a=s.tPW0,u=this.mem.U3;t.set(0,0,0),t.set(0,1,0),t.set(0,2,0);for(var h=0;h<r;++h)for(var f=0;f<3;++f)t.zzn3(0,f,e[3*h+f]);for(var c=0;c<3;++c)t.mulComponent(0,c,1/r);for(var l=0;l<r;++l)for(var v=0;v<3;++v)i.set(l,v,e[3*l+v]-t.get(0,v));i.zz012(a),a.zzr2(i,u);var m=u,g=(0,o.zz92)(m,{zzZ2:!1,zzj3:0});g.U.zz012(u);for(var w=u,p=g.s,y=1;y<4;++y)for(var d=(0,n.zzr3)(p[y-1]/r),b=0;b<3;++b)t.set(y,b,t.get(0,b)+d*w.get(y-1,b))}},{key:"zzn1",value:function(){for(var t=this.zz42,r=this.zz52,e=this.zz92,n=this.zz82,s=this.mem.CC,i=0;i<3;++i)for(var a=1;a<4;++a)s.set(i,a-1,e.get(a,i)-e.get(0,i));for(var u=(0,o.inverse2)(s,!0,20),h=0;h<n;++h){for(var f=3*h,c=4*h,l=0;l<3;++l)r[c+1+l]=u.get(l,0)*(t[f]-e.get(0,0))+u.get(l,1)*(t[f+1]-e.get(0,1))+u.get(l,2)*(t[f+2]-e.get(0,2));r[c]=1-r[c+1]-r[c+2]-r[c+3]}}},{key:"zzLM",value:function(t,r,e,o,n){for(var s=this.zz52,i=this.fu,a=this.fv,u=0;u<4;++u){var h=s[e+u];t.set(r,3*u,h*i),t.set(r,3*u+1,0),t.set(r,3*u+2,-o*h),t.set(r+1,3*u,0),t.set(r+1,3*u+1,h*a),t.set(r+1,3*u+2,-n*h)}}},{key:"zzp1",value:function(t,r){for(var e=this.mem,o=e.dv,s=e.v,i=0;i<4;++i)for(var a=0,u=1,h=0;h<6;++h)o[i][h][0]=t.get(s[i],3*a)-t.get(s[i],3*u),o[i][h][1]=t.get(s[i],3*a+1)-t.get(s[i],3*u+1),o[i][h][2]=t.get(s[i],3*a+2)-t.get(s[i],3*u+2),++u>3&&(u=++a+1);for(var f=0;f<6;++f)r.set(f,0,(0,n.zzs3)(o[0][f],o[0][f])),r.set(f,1,2*(0,n.zzs3)(o[0][f],o[1][f])),r.set(f,2,(0,n.zzs3)(o[1][f],o[1][f])),r.set(f,3,2*(0,n.zzs3)(o[0][f],o[2][f])),r.set(f,4,2*(0,n.zzs3)(o[1][f],o[2][f])),r.set(f,5,(0,n.zzs3)(o[2][f],o[2][f])),r.set(f,6,2*(0,n.zzs3)(o[0][f],o[3][f])),r.set(f,7,2*(0,n.zzs3)(o[1][f],o[3][f])),r.set(f,8,2*(0,n.zzs3)(o[2][f],o[3][f])),r.set(f,9,(0,n.zzs3)(o[3][f],o[3][f]))}},{key:"zzq1",value:function(t){var r=this.zz92;t.set(0,0,(0,n.zzq3)(r,0,1)),t.set(1,0,(0,n.zzq3)(r,0,2)),t.set(2,0,(0,n.zzq3)(r,0,3)),t.set(3,0,(0,n.zzq3)(r,1,2)),t.set(4,0,(0,n.zzq3)(r,1,3)),t.set(5,0,(0,n.zzq3)(r,2,3))}},{key:"zzr1",value:function(t,r,e){for(var s=this.mem.L6x4,i=0;i<6;++i)s.set(i,0,t.get(i,0)),s.set(i,1,t.get(i,1)),s.set(i,2,t.get(i,3)),s.set(i,3,t.get(i,6));var a=(0,o.zzp3)(s,r,!0,10),u=(0,n.SIGN)(a.get(0,0));e[0]=(0,n.zzr3)(u*a.get(0,0)),e[1]=u*a.get(1,0)/e[0],e[2]=u*a.get(2,0)/e[0],e[3]=u*a.get(3,0)/e[0]}},{key:"zzs1",value:function(t,r,e){for(var s=this.mem.L6x3,i=0;i<6;++i)s.set(i,0,t.get(i,0)),s.set(i,1,t.get(i,1)),s.set(i,2,t.get(i,2));var a=(0,o.zzp3)(s,r,!0,11),u=(0,n.SIGN)(a.get(0,0));e[0]=(0,n.zzr3)(u*a.get(0,0)),e[1]=u*a.get(2,0)>0?(0,n.zzr3)(u*a.get(2,0)):0,e[0]*=(0,n.SIGN)(a.get(1,0)),e[2]=0,e[3]=0}},{key:"zzt1",value:function(t,r,e){for(var s=this.mem.L6x5,i=0;i<6;++i)s.set(i,0,t.get(i,0)),s.set(i,1,t.get(i,1)),s.set(i,2,t.get(i,2)),s.set(i,3,t.get(i,3)),s.set(i,4,t.get(i,4));var a=(0,o.zzp3)(s,r,!0,12),u=(0,n.SIGN)(a.get(0,0));e[0]=(0,n.zzr3)(u*a.get(0,0)),e[1]=u*a.get(2,0)>0?(0,n.zzr3)(u*a.get(2,0)):0,a.get(1,0)<0&&(e[0]*=-1),e[2]=a.get(3,0)/e[0],e[3]=0}},{key:"zzu1",value:function(t,r,e){for(var o=this.mem,n=o.A,s=o.B,i=0;i<this.zz32;++i){this.zzv1(t,r,e,n,s);for(var a=this.zzw1(n,s),u=0;u<4;++u)e[u]+=a.get(u,0)}}},{key:"zzv1",value:function(t,r,e,o,n){for(var s=0;s<6;++s)o.set(s,0,2*t.get(s,0)*e[0]+t.get(s,1)*e[1]+t.get(s,3)*e[2]+t.get(s,6)*e[3]),o.set(s,1,t.get(s,1)*e[0]+2*t.get(s,2)*e[1]+t.get(s,4)*e[2]+t.get(s,7)*e[3]),o.set(s,2,t.get(s,3)*e[0]+t.get(s,4)*e[1]+2*t.get(s,5)*e[2]+t.get(s,8)*e[3]),o.set(s,3,t.get(s,6)*e[0]+t.get(s,7)*e[1]+t.get(s,8)*e[2]+2*t.get(s,9)*e[3]),n.set(s,0,r.get(s,0)-(t.get(s,0)*e[0]*e[0]+t.get(s,1)*e[0]*e[1]+t.get(s,2)*e[1]*e[1]+t.get(s,3)*e[0]*e[2]+t.get(s,4)*e[1]*e[2]+t.get(s,5)*e[2]*e[2]+t.get(s,6)*e[0]*e[3]+t.get(s,7)*e[1]*e[3]+t.get(s,8)*e[2]*e[3]+t.get(s,9)*e[3]*e[3]))}},{key:"zzw1",value:function(t,r){var e=null;return this.mem.zzm3?(e=this.mem.zzm3).update(t):(e=new o.zzT2(t),this.mem.zzm3=e),e.zzY1()?e.solve(r):this.mem.zzG141}},{key:"zzx1",value:function(t,r){for(var e=this.zzA2,o=0;o<4;++o)e.set(o,0,0),e.set(o,1,0),e.set(o,2,0);for(var n=0;n<4;++n)for(var s=0;s<4;++s)for(var i=0;i<3;++i)e.zzn3(s,i,t[n]*r.get(11-n,3*s+i))}},{key:"zzy1",value:function(){for(var t=this.zzA2,r=this.zz82,e=this.zz52,o=this.zz62,n=0;n<r;++n)for(var s=4*n,i=3*n,a=0;a<3;++a)o[i+a]=e[s]*t.get(0,a)+e[s+1]*t.get(1,a)+e[s+2]*t.get(2,a)+e[s+3]*t.get(3,a)}},{key:"zzz1",value:function(){var t=this.zz62,r=this.zz82,e=this.zzA2;if(t[2]<0){for(var o=0;o<4;++o)for(var n=0;n<3;++n)e.mulComponent(o,n,-1);for(var s=0;s<r;++s)t[3*s]=-t[3*s],t[3*s+1]=-t[3*s+1],t[3*s+2]=-t[3*s+2]}}},{key:"zz02",value:function(t,r){var e=this.zz62,s=this.zz42,i=this.zz82,a=this.mem,u=a.pc0,h=a.pw0,f=a.ABt;f.zzi3();for(var c=0;c<i;++c)for(var l=0;l<3;++l)u[l]+=e[3*c+l],h[l]+=s[3*c+l];for(var v=0;v<3;++v)u[v]/=i,h[v]/=i;for(var m=0;m<i;++m)for(var g=0;g<3;++g)f.zzn3(g,0,(e[3*m+g]-u[g])*(s[3*m]-h[0])),f.zzn3(g,1,(e[3*m+g]-u[g])*(s[3*m+1]-h[1])),f.zzn3(g,2,(e[3*m+g]-u[g])*(s[3*m+2]-h[2]));for(var w=(0,o.zz92)(f,{zzj3:2}),p=w.U,y=w.V,d=0;d<3;++d)for(var b=0;b<3;++b)t[d][b]=(0,n.zzs3)(p.zzM(d),y.zzM(b));var M=new o.Matrix(t),x=(0,o.zzU1)(M);return x<=0&&(t[2][0]*=-1,t[2][1]*=-1,t[2][2]*=-1),r[0]=u[0]-(0,n.zzs3)(t[0],h),r[1]=u[1]-(0,n.zzs3)(t[1],h),r[2]=u[2]-(0,n.zzs3)(t[2],h),x}},{key:"zz12",value:function(t,r){for(var e=0,o=this.zz82,s=this.fu,i=this.fv,a=this.zz42,u=this.us,h=0;h<o;++h){var f=a.slice(3*h,3*h+3),c=(0,n.zzs3)(t[0],f)+r[0],l=(0,n.zzs3)(t[1],f)+r[1],v=1/((0,n.zzs3)(t[2],f)+r[2]),m=s*c*v,g=i*l*v,w=u[2*h],p=u[2*h+1];e+=(0,n.zzr3)((w-m)*(w-m)+(p-g)*(p-g))}return e/o}},{key:"zz22",value:function(t,r,e,o,n){this.zzx1(r,t),this.zzy1(),this.zzz1(),n[1]=this.zz02(e,o),n[0]=this.zz12(e,o)}},{key:"zzj1",value:function(){var t=this.zz82,r=this.us,e=this.mem,n=this.zzV3,s=this.zzk3,i=e.L6x10,u=e.zzY3,h=e.zzX3,f=e.zzW3Dets,c=e.Rs,l=e.ts,v=e.U12,m=this.zzB2,g=m.M,w=m.tM;this.zzm1(),this.zzn1();for(var p=0;p<t;++p)this.zzLM(g,2*p,4*p,r[2*p],r[2*p+1]);g.zz012(w),w.zzr2(g,v);var y=v;(0,o.zz92)(y,{zzZ2:!1,zzj3:1}).U.zz012(v);var d=v;this.zzp1(d,i),this.zzq1(u),this.zzr1(i,u,h[0]),this.zzu1(i,u,h[0]),this.zz22(d,h[0],c[0],l[0],f[0]),this.zzs1(i,u,h[1]),this.zzu1(i,u,h[1]),this.zz22(d,h[1],c[1],l[1],f[1]),this.zzt1(i,u,h[2]),this.zzu1(i,u,h[2]),this.zz22(d,h[2],c[2],l[2],f[2]),this.zzu1(i,u,h[3]),this.zz22(d,h[3],c[3],l[3],f[3]),f[3][0]/=1.02;var b=-1;f[0][1]*s>=0&&(b=0),(-1===b||f[1][0]<f[b][0])&&f[1][1]*s>=0&&(b=1),(-1===b||f[2][0]<f[b][0])&&f[2][1]*s>=0&&(b=2),(-1===b||f[3][0]<f[b][0])&&f[3][1]*s>=0&&(b=3),-1===b&&(b=0,f[1][0]<f[b][0]&&(b=1),f[2][0]<f[b][0]&&(b=2),f[3][0]<f[b][0]&&(b=3)),this.zzk3=f[b][1],h[3].set(h[b]);var M=c[b];M[0][2]*=-1,M[1][2]*=-1,M[2][0]*=-1,M[2][1]*=-1,a(M,n.q),n.zzl3=b,n.zyp13=!0,n.repError=f[b][0],n.R=M,n.t=l[b]}}])&&s(r.prototype,e),u&&s(r,u),t}();e.default=u},{"zz14":3,"./zzz3/zz04":4}],2:[function(t,r,e){var o,n=(o=t("./zypSolver"))&&o.zzB?o:{default:o};r.exports={zypSolver:n.default}},{"./zypSolver":1}],3:[function(t,r,e){Object.defineProperty(e,"zzB",{value:!0}),e.zzq3=e.zzs3=e.SIGN=e.zzr3=void 0;var o=Math.sqrt;e.zzr3=o;var n=Math.sign;e.SIGN=n;e.zzs3=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]};e.zzq3=function(t,r,e){var o=t.get(r,0),n=t.get(r,1),s=t.get(r,2),i=t.get(e,0),a=t.get(e,1),u=t.get(e,2);return(o-i)*(o-i)+(n-a)*(n-a)+(s-u)*(s-u)}},{}],4:[function(t,r,e){function o(t,r){if("function"!=typeof r&&null!==r)throw new Error();t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&n(t,r)}function n(t,r){return(n=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function s(t){var r=function(){if("undefined"==typeof zzt3||!zzt3.construct)return!1;if(zzt3.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(zzt3.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var e,o=a(t);if(r){var n=a(this).constructor;e=zzt3.construct(o,arguments,n)}else e=o.apply(this,arguments);return i(this,e)}}function i(t,r){return!r||"object"!==c(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,r){if(!(t instanceof r))throw new Error()}function h(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,r,e){return r&&h(t.prototype,r),e&&h(t,e),t}function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l,v;l=void 0,v=function(t){var r=Object.prototype.toString;function e(t){return r.call(t).endsWith("Array]")}function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e(t))throw new Error();if(0===t.length)throw new Error();if(void 0!==o.output){if(!e(o.output))throw new Error();r=o.output}else r=new Array(t.length);var n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e(t))throw new Error();if(0===t.length)throw new Error();var o=r.fromIndex,n=void 0===o?0:o,s=r.toIndex,i=void 0===s?t.length:s;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error();if(i<=n||i>t.length||!Number.isInteger(i))throw new Error();for(var a=t[n],u=n+1;u<i;u++)t[u]<a&&(a=t[u]);return a}(t),s=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e(t))throw new Error();if(0===t.length)throw new Error();var o=r.fromIndex,n=void 0===o?0:o,s=r.toIndex,i=void 0===s?t.length:s;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error();if(i<=n||i>t.length||!Number.isInteger(i))throw new Error();for(var a=t[n],u=n+1;u<i;u++)t[u]>a&&(a=t[u]);return a}(t);if(n===s)throw new Error();var i=o.min,a=void 0===i?o.autoMinMax?n:0:i,u=o.max,h=void 0===u?o.autoMinMax?s:1:u;if(a>=h)throw new Error();for(var f=(h-a)/(s-n),c=0;c<t.length;c++)r[c]=(t[c]-n)*f+a;return r}var a=" ".repeat(2),h=" ".repeat(4);function l(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r.zzgs,o=void 0===e?15:e,n=r.zzks,s=void 0===n?10:n,i=r.zzo3,u=void 0===i?8:i;return"".concat(t.constructor.name," {\\n").concat(a,"[\\n").concat(h).concat(function(t,r,e,o){for(var n=t.zzk2,s=t.zzj2,i=Math.min(n,r),a=Math.min(s,e),u=[],f=0;f<i;f++){for(var c=[],l=0;l<a;l++)c.push(v(t.get(f,l),o));u.push("".concat(c.join(" ")))}return a!==s&&(u[u.length-1]+=" ... ".concat(s-e," more zzj2")),i!==n&&u.push("... ".concat(n-r," more zzk2")),u.join("\\n".concat(h))}(t,o,s,u),"\\n").concat(a,"]\\n").concat(a,"zzk2: ").concat(t.zzk2,"\\n").concat(a,"zzj2: ").concat(t.zzj2,"\\n}")}function v(t,r){var e=String(t);if(e.length<=r)return e.padEnd(r," ");var o=t.toPrecision(r-2);if(o.length<=r)return o;var n=t.zzP3(r-2),s=n.indexOf("e"),i=n.slice(s);return n.slice(0,r-i.length)+i}function m(t,r,e){var o=e?t.zzk2:t.zzk2-1;if(r<0||r>o)throw new Error()}function g(t,r,e){var o=e?t.zzj2:t.zzj2-1;if(r<0||r>o)throw new Error()}function w(t,r){if(r.zzC&&(r=r.zzC()),r.length!==t.zzj2)throw new Error();return r}function p(t,r){if(r.zzC&&(r=r.zzC()),r.length!==t.zzk2)throw new Error();return r}function y(t,r,e){return{row:function(t,r){if("object"!=c(r))throw new Error();if(r.some(function(r){return r<0||r>=t.zzk2}))throw new Error();return Array.isArray(r)||(r=Array.from(r)),r}(t,r),zz23:function(t,r){if("object"!=c(r))throw new Error();if(r.some(function(r){return r<0||r>=t.zzj2}))throw new Error();return Array.isArray(r)||(r=Array.from(r)),r}(t,e)}}function d(t,r,e,o,n){if(5!==arguments.length)throw new Error();if(M("zz0",r),M("zz1",e),M("zz2",o),M("zz3",n),r>e||o>n||r<0||r>=t.zzk2||e<0||e>=t.zzk2||o<0||o>=t.zzj2||n<0||n>=t.zzj2)throw new Error()}function b(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=[],o=0;o<t;o++)e.push(r);return e}function M(t,r){if("number"!=typeof r)throw new Error("".concat(t," must be a number"))}function x(t){if(t.zzu3())throw new Error()}var k=function(){function t(){u(this,t)}return f(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new Error();for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t.call(this,r,e);return this}},{key:"zzC",value:function(){for(var t=[],r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t.push(this.get(r,e));return t}},{key:"zzD",value:function(){for(var t=[],r=0;r<this.zzk2;r++){t.push([]);for(var e=0;e<this.zzj2;e++)t[r].push(this.get(r,e))}return t}},{key:"toJSON",value:function(){return this.zzD()}},{key:"zzE",value:function(){return 1===this.zzk2}},{key:"zzF",value:function(){return 1===this.zzj2}},{key:"zzG",value:function(){return 1===this.zzk2||1===this.zzj2}},{key:"zzH",value:function(){return this.zzk2===this.zzj2}},{key:"zzu3",value:function(){return 0===this.zzk2||0===this.zzj2}},{key:"zzI",value:function(){if(this.zzH()){for(var t=0;t<this.zzk2;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}},{key:"zzJ",value:function(){for(var t=0,r=0,e=-1,o=!0,n=!1;t<this.zzk2&&o;){for(r=0,n=!1;r<this.zzj2&&!1===n;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(n=!0,e=r):(o=!1,n=!0);t++}return o}},{key:"zzK",value:function(){for(var t=0,r=0,e=-1,o=!0,n=!1;t<this.zzk2&&o;){for(r=0,n=!1;r<this.zzj2&&!1===n;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(n=!0,e=r):(o=!1,n=!0);for(var s=r+1;s<this.zzk2;s++)0!==this.get(t,s)&&(o=!1);t++}return o}},{key:"zzv3",value:function(){for(var t=this.clone(),r=0,e=0;r<t.zzk2&&e<t.zzj2;){for(var o=r,n=r;n<t.zzk2;n++)t.get(n,e)>t.get(o,e)&&(o=n);if(0===t.get(o,e))e++;else{t.zzP(r,o);for(var s=t.get(r,e),i=e;i<t.zzj2;i++)t.set(r,i,t.get(r,i)/s);for(var a=r+1;a<t.zzk2;a++){var u=t.get(a,e)/t.get(r,e);t.set(a,e,0);for(var h=e+1;h<t.zzj2;h++)t.set(a,h,t.get(a,h)-t.get(r,h)*u)}r++,e++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.zzv3(),r=t.zzj2,e=t.zzk2,o=e-1;o>=0;)if(0===t.zzg(o))o--;else{for(var n=0,s=!1;n<e&&!1===s;)1===t.get(o,n)?s=!0:n++;for(var i=0;i<o;i++)for(var a=t.get(i,n),u=n;u<r;u++){var h=t.get(i,u)-a*t.get(o,u);t.set(i,u,h)}o--}return t}},{key:"set",value:function(){throw new Error()}},{key:"get",value:function(){throw new Error()}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=c(t))throw new Error();var r=t.zzk2,e=void 0===r?1:r,o=t.zzj2,n=void 0===o?1:o;if(!Number.isInteger(e)||e<=0)throw new Error();if(!Number.isInteger(n)||n<=0)throw new Error();for(var s=new R(this.zzk2*e,this.zzj2*n),i=0;i<e;i++)for(var a=0;a<n;a++)s.zz61(this,this.zzk2*i,this.zzj2*a);return s}},{key:"zzL",value:function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"zzM",value:function(t){m(this,t);for(var r=[],e=0;e<this.zzj2;e++)r.push(this.get(t,e));return r}},{key:"zzMVector",value:function(t){return R.zzE1(this.zzM(t))}},{key:"zzO",value:function(t,r){m(this,t),r=w(this,r);for(var e=0;e<this.zzj2;e++)this.set(t,e,r[e]);return this}},{key:"zzP",value:function(t,r){m(this,t),m(this,r);for(var e=0;e<this.zzj2;e++){var o=this.get(t,e);this.set(t,e,this.get(r,e)),this.set(r,e,o)}return this}},{key:"zzQ",value:function(t){g(this,t);for(var r=[],e=0;e<this.zzk2;e++)r.push(this.get(e,t));return r}},{key:"zzQVector",value:function(t){return R.zzF1(this.zzQ(t))}},{key:"zzS",value:function(t,r){g(this,t),r=p(this,r);for(var e=0;e<this.zzk2;e++)this.set(e,t,r[e]);return this}},{key:"zzT",value:function(t,r){g(this,t),g(this,r);for(var e=0;e<this.zzk2;e++){var o=this.get(e,t);this.set(e,t,this.get(e,r)),this.set(e,r,o)}return this}},{key:"zzU",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)+t[e]);return this}},{key:"zzV",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)-t[e]);return this}},{key:"zzW",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)*t[e]);return this}},{key:"zzX",value:function(t){t=w(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)/t[e]);return this}},{key:"zzY",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)+t[r]);return this}},{key:"zzZ",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)-t[r]);return this}},{key:"zza",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)*t[r]);return this}},{key:"zzb",value:function(t){t=p(this,t);for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)/t[r]);return this}},{key:"zzc",value:function(t,r){m(this,t);for(var e=0;e<this.zzj2;e++)this.set(t,e,this.get(t,e)*r);return this}},{key:"zzd",value:function(t,r){g(this,t);for(var e=0;e<this.zzk2;e++)this.set(e,t,this.get(e,t)*r);return this}},{key:"max",value:function(){if(this.zzu3())return NaN;for(var t=this.get(0,0),r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.get(r,e)>t&&(t=this.get(r,e));return t}},{key:"zze",value:function(){x(this);for(var t=this.get(0,0),r=[0,0],e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.get(e,o)>t&&(t=this.get(e,o),r[0]=e,r[1]=o);return r}},{key:"min",value:function(){if(this.zzu3())return NaN;for(var t=this.get(0,0),r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.get(r,e)<t&&(t=this.get(r,e));return t}},{key:"zzf",value:function(){x(this);for(var t=this.get(0,0),r=[0,0],e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.get(e,o)<t&&(t=this.get(e,o),r[0]=e,r[1]=o);return r}},{key:"zzg",value:function(t){if(m(this,t),this.zzu3())return NaN;for(var r=this.get(t,0),e=1;e<this.zzj2;e++)this.get(t,e)>r&&(r=this.get(t,e));return r}},{key:"zzgIndex",value:function(t){m(this,t),x(this);for(var r=this.get(t,0),e=[t,0],o=1;o<this.zzj2;o++)this.get(t,o)>r&&(r=this.get(t,o),e[1]=o);return e}},{key:"zzi",value:function(t){if(m(this,t),this.zzu3())return NaN;for(var r=this.get(t,0),e=1;e<this.zzj2;e++)this.get(t,e)<r&&(r=this.get(t,e));return r}},{key:"zziIndex",value:function(t){m(this,t),x(this);for(var r=this.get(t,0),e=[t,0],o=1;o<this.zzj2;o++)this.get(t,o)<r&&(r=this.get(t,o),e[1]=o);return e}},{key:"zzk",value:function(t){if(g(this,t),this.zzu3())return NaN;for(var r=this.get(0,t),e=1;e<this.zzk2;e++)this.get(e,t)>r&&(r=this.get(e,t));return r}},{key:"zzkIndex",value:function(t){g(this,t),x(this);for(var r=this.get(0,t),e=[0,t],o=1;o<this.zzk2;o++)this.get(o,t)>r&&(r=this.get(o,t),e[0]=o);return e}},{key:"zzm",value:function(t){if(g(this,t),this.zzu3())return NaN;for(var r=this.get(0,t),e=1;e<this.zzk2;e++)this.get(e,t)<r&&(r=this.get(e,t));return r}},{key:"zzmIndex",value:function(t){g(this,t),x(this);for(var r=this.get(0,t),e=[0,t],o=1;o<this.zzk2;o++)this.get(o,t)<r&&(r=this.get(o,t),e[0]=o);return e}},{key:"zzo",value:function(){for(var t=Math.min(this.zzk2,this.zzj2),r=[],e=0;e<t;e++)r.push(this.get(e,e));return r}},{key:"zzp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zzw3",r=0;if("max"===t)return this.max();if("zzw3"===t){for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)r+=this.get(e,o)*this.get(e,o);return Math.sqrt(r)}throw new Error("unknown zzp type: ".concat(t))}},{key:"zzq",value:function(){for(var t=0,r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t+=this.get(r,e),this.set(r,e,t);return this}},{key:"dot",value:function(r){t.zzM1(r)&&(r=r.zzC());var e=this.zzC();if(e.length!==r.length)throw new Error();for(var o=0,n=0;n<e.length;n++)o+=e[n]*r[n];return o}},{key:"zzr",value:function(t){t=R.zzL1(t);var r=new R(this.zzk2,t.zzj2);return this.zzr2(t,r),r}},{key:"zzr2",value:function(t,r){var e=this.zzk2,o=this.zzj2,n=t.zzj2;this.Bcolj=this.Bcolj||new Float32Array(o);for(var s=this.Bcolj,i=0;i<n;i++){for(var a=0;a<o;a++)s[a]=t.get(a,i);for(var u=0;u<e;u++){for(var h=0,f=0;f<o;f++)h+=this.get(u,f)*s[f];r.set(u,i,h)}}}},{key:"zzs",value:function(t){t=R.zzL1(t);var r=new R(2,2),e=this.get(0,0),o=t.get(0,0),n=this.get(0,1),s=t.get(0,1),i=this.get(1,0),a=t.get(1,0),u=this.get(1,1),h=t.get(1,1),f=(e+u)*(o+h),c=(i+u)*o,l=e*(s-h),v=u*(a-o),m=(e+n)*h,g=f+v-m+(n-u)*(a+h),w=l+m,p=c+v,y=f-c+l+(i-e)*(o+s);return r.set(0,0,g),r.set(0,1,w),r.set(1,0,p),r.set(1,1,y),r}},{key:"zzt",value:function(t){t=R.zzL1(t);var r=new R(3,3),e=this.get(0,0),o=this.get(0,1),n=this.get(0,2),s=this.get(1,0),i=this.get(1,1),a=this.get(1,2),u=this.get(2,0),h=this.get(2,1),f=this.get(2,2),c=t.get(0,0),l=t.get(0,1),v=t.get(0,2),m=t.get(1,0),g=t.get(1,1),w=t.get(1,2),p=t.get(2,0),y=t.get(2,1),d=t.get(2,2),b=(e-s)*(-l+g),M=(-e+s+i)*(c-l+g),x=(s+i)*(-c+l),k=e*c,S=(-e+u+h)*(c-v+w),E=(-e+u)*(v-w),T=(u+h)*(-c+v),A=(-n+h+f)*(g+p-y),C=(n-f)*(g-y),I=n*p,D=(h+f)*(-p+y),N=(-n+i+a)*(w+p-d),O=(n-a)*(w-d),F=(i+a)*(-p+d),P=k+I+o*m,j=(e+o+n-s-i-h-f)*g+M+x+k+A+I+D,q=k+S+T+(e+o+n-i-a-u-h)*w+I+N+F,V=b+i*(-c+l+m-g-w-p+d)+M+k+I+N+O,z=b+M+x+k+a*y,Q=I+N+O+F+s*v,L=k+S+E+h*(-c+v+m-g-w-p+y)+A+C+I,B=A+C+I+D+u*l,U=k+S+E+T+f*d;return r.set(0,0,P),r.set(0,1,j),r.set(0,2,q),r.set(1,0,V),r.set(1,1,z),r.set(1,2,Q),r.set(2,0,L),r.set(2,1,B),r.set(2,2,U),r}},{key:"zzrStrassen",value:function(r){r=R.zzL1(r);var e=this.clone(),o=e.zzk2,n=e.zzj2,s=r.zzk2,i=r.zzj2;function a(r,e,o){var n=r.zzk2,s=r.zzj2;if(n===e&&s===o)return r;var i=t.zzG1(e,o);return i=i.zz61(r,0,0)}n!==s&&1;var u=Math.max(o,s),h=Math.max(n,i);return function r(e,o,n,s){if(n<=512||s<=512)return e.zzr(o);n%2==1&&s%2==1?(e=a(e,n+1,s+1),o=a(o,n+1,s+1)):n%2==1?(e=a(e,n+1,s),o=a(o,n+1,s)):s%2==1&&(e=a(e,n,s+1),o=a(o,n,s+1));var i=parseInt(e.zzk2/2,10),u=parseInt(e.zzj2/2,10),h=e.zz31(0,i-1,0,u-1),f=o.zz31(0,i-1,0,u-1),c=e.zz31(0,i-1,u,e.zzj2-1),l=o.zz31(0,i-1,u,o.zzj2-1),v=e.zz31(i,e.zzk2-1,0,u-1),m=o.zz31(i,o.zzk2-1,0,u-1),g=e.zz31(i,e.zzk2-1,u,e.zzj2-1),w=o.zz31(i,o.zzk2-1,u,o.zzj2-1),p=r(t.add(h,g),t.add(f,w),i,u),y=r(t.add(v,g),f,i,u),d=r(h,t.sub(l,w),i,u),b=r(g,t.sub(m,f),i,u),M=r(t.add(h,c),w,i,u),x=r(t.sub(v,h),t.add(f,l),i,u),k=r(t.sub(c,g),t.add(m,w),i,u),S=t.add(p,b);S.sub(M),S.add(k);var R=t.add(d,M),E=t.add(y,b),T=t.sub(p,y);T.add(d),T.add(x);var A=t.zzG1(2*S.zzk2,2*S.zzj2);return(A=(A=(A=(A=A.zz61(S,0,0)).zz61(R,S.zzk2,0)).zz61(E,0,S.zzj2)).zz61(T,S.zzk2,S.zzj2)).zz31(0,n-1,0,s-1)}(e=a(e,u,h),r=a(r,u,h),u,h)}},{key:"zzv",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=c(t))throw new Error();var r=t.min,e=void 0===r?0:r,o=t.max,s=void 0===o?1:o;if(!Number.isFinite(e))throw new Error();if(!Number.isFinite(s))throw new Error();if(e>=s)throw new Error();for(var i=new R(this.zzk2,this.zzj2),a=0;a<this.zzk2;a++){var u=this.zzM(a);u.length>0&&n(u,{min:e,max:s,output:u}),i.zzO(a,u)}return i}},{key:"zzw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=c(t))throw new Error();var r=t.min,e=void 0===r?0:r,o=t.max,s=void 0===o?1:o;if(!Number.isFinite(e))throw new Error();if(!Number.isFinite(s))throw new Error();if(e>=s)throw new Error();for(var i=new R(this.zzk2,this.zzj2),a=0;a<this.zzj2;a++){var u=this.zzQ(a);u.length&&n(u,{min:e,max:s,output:u}),i.zzS(a,u)}return i}},{key:"zzx",value:function(){for(var t=Math.ceil(this.zzj2/2),r=0;r<this.zzk2;r++)for(var e=0;e<t;e++){var o=this.get(r,e),n=this.get(r,this.zzj2-1-e);this.set(r,e,n),this.set(r,this.zzj2-1-e,o)}return this}},{key:"zzy",value:function(){for(var t=Math.ceil(this.zzk2/2),r=0;r<this.zzj2;r++)for(var e=0;e<t;e++){var o=this.get(e,r),n=this.get(this.zzk2-1-e,r);this.set(e,r,n),this.set(this.zzk2-1-e,r,o)}return this}},{key:"zzz",value:function(t){t=R.zzL1(t);for(var r=this.zzk2,e=this.zzj2,o=t.zzk2,n=t.zzj2,s=new R(r*o,e*n),i=0;i<r;i++)for(var a=0;a<e;a++)for(var u=0;u<o;u++)for(var h=0;h<n;h++)s.set(o*i+u,n*a+h,this.get(i,a)*t.get(u,h));return s}},{key:"kroneckerSum",value:function(t){if(t=R.zzL1(t),!this.zzH()||!t.zzH())throw new Error();var r=this.zzk2,e=t.zzk2,o=this.zzz(R.zzJ1(e,e)),n=R.zzJ1(r,r).zzz(t);return o.add(n)}},{key:"zz01",value:function(){var t=new R(this.zzj2,this.zzk2);return this.zz012(t),t}},{key:"zz012",value:function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)t.set(e,r,this.get(r,e))}},{key:"zz11",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,r=0;r<this.zzk2;r++)this.zzO(r,this.zzM(r).sort(t));return this}},{key:"zz21",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,r=0;r<this.zzj2;r++)this.zzS(r,this.zzQ(r).sort(t));return this}},{key:"zz31",value:function(t,r,e,o){d(this,t,r,e,o);for(var n=new R(r-t+1,o-e+1),s=t;s<=r;s++)for(var i=e;i<=o;i++)n.set(s-t,i-e,this.get(s,i));return n}},{key:"zz31Row",value:function(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.zzj2-1),r>e||r<0||r>=this.zzj2||e<0||e>=this.zzj2)throw new Error();for(var o=new R(t.length,e-r+1),n=0;n<t.length;n++)for(var s=r;s<=e;s++){if(t[n]<0||t[n]>=this.zzk2)throw new Error("Row index out of range: ".concat(t[n]));o.set(n,s-r,this.get(t[n],s))}return o}},{key:"zz31Column",value:function(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.zzk2-1),r>e||r<0||r>=this.zzk2||e<0||e>=this.zzk2)throw new Error();for(var o=new R(e-r+1,t.length),n=0;n<t.length;n++)for(var s=r;s<=e;s++){if(t[n]<0||t[n]>=this.zzj2)throw new Error("Column index out of range: ".concat(t[n]));o.set(s-r,n,this.get(s,t[n]))}return o}},{key:"zz61",value:function(t,r,e){if((t=R.zzL1(t)).zzu3())return this;d(this,r,r+t.zzk2-1,e,e+t.zzj2-1);for(var o=0;o<t.zzk2;o++)for(var n=0;n<t.zzj2;n++)this.set(r+o,e+n,t.get(o,n));return this}},{key:"zz71",value:function(t,r){for(var e=y(this,t,r),o=new R(t.length,r.length),n=0;n<e.row.length;n++)for(var s=e.row[n],i=0;i<e.zz23.length;i++){var a=e.zz23[i];o.set(n,i,this.get(s,a))}return o}},{key:"trace",value:function(){for(var t=Math.min(this.zzk2,this.zzj2),r=0,e=0;e<t;e++)r+=this.get(e,e);return r}},{key:"copy",value:function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,t.get(r,e))}},{key:"reset",value:function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,0)}},{key:"clone",value:function(){var t=new R(this.zzk2,this.zzj2);return t.copy(this),t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var r=b(t.zzk2),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[e]+=t.get(e,o);return r}(this);case"zz23":return function(t){for(var r=b(t.zzj2),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[o]+=t.get(e,o);return r}(this);case void 0:return function(t){for(var r=0,e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)r+=t.get(e,o);return r}(this);default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zz81",value:function(t){switch(t){case"row":return function(t){for(var r=b(t.zzk2,1),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[e]*=t.get(e,o);return r}(this);case"zz23":return function(t){for(var r=b(t.zzj2,1),e=0;e<t.zzk2;++e)for(var o=0;o<t.zzj2;++o)r[o]*=t.get(e,o);return r}(this);case void 0:return function(t){for(var r=1,e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)r*=t.get(e,o);return r}(this);default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zz91",value:function(t){var r=this.sum(t);switch(t){case"row":for(var e=0;e<this.zzk2;e++)r[e]/=this.zzj2;return r;case"zz23":for(var o=0;o<this.zzj2;o++)r[o]/=this.zzk2;return r;case void 0:return r/this.zzC1;default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zzA1",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==c(t)&&(r=t,t=void 0),"object"!=c(r))throw new Error();var e=r,o=e.unbiased,n=void 0===o||o,s=e.zz91,i=void 0===s?this.zz91(t):s;if("boolean"!=typeof n)throw new Error();switch(t){case"row":if(!Array.isArray(i))throw new Error();return function(t,r,e){for(var o=t.zzk2,n=t.zzj2,s=[],i=0;i<o;i++){for(var a=0,u=0,h=0,f=0;f<n;f++)a+=h=t.get(i,f)-e[i],u+=h*h;r?s.push((u-a*a/n)/(n-1)):s.push((u-a*a/n)/n)}return s}(this,n,i);case"zz23":if(!Array.isArray(i))throw new Error();return function(t,r,e){for(var o=t.zzk2,n=t.zzj2,s=[],i=0;i<n;i++){for(var a=0,u=0,h=0,f=0;f<o;f++)a+=h=t.get(f,i)-e[i],u+=h*h;r?s.push((u-a*a/o)/(o-1)):s.push((u-a*a/o)/o)}return s}(this,n,i);case void 0:if("number"!=typeof i)throw new Error();return function(t,r,e){for(var o=t.zzk2,n=t.zzj2,s=o*n,i=0,a=0,u=0,h=0;h<o;h++)for(var f=0;f<n;f++)i+=u=t.get(h,f)-e,a+=u*u;return r?(a-i*i/s)/(s-1):(a-i*i/s)/s}(this,n,i);default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"zzB1",value:function(t,r){"object"==c(t)&&(r=t,t=void 0);var e=this.zzA1(t,r);if(void 0===t)return Math.sqrt(e);for(var o=0;o<e.length;o++)e[o]=Math.sqrt(e[o]);return e}},{key:"center",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==c(t)&&(r=t,t=void 0),"object"!=c(r))throw new Error();var e=r.center,o=void 0===e?this.zz91(t):e;switch(t){case"row":if(!Array.isArray(o))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)-r[e])}(this,o),this;case"zz23":if(!Array.isArray(o))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)-r[o])}(this,o),this;case void 0:if("number"!=typeof o)throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)-r)}(this,o),this;default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"scale",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==c(t)&&(r=t,t=void 0),"object"!=c(r))throw new Error();var e=r.scale;switch(t){case"row":if(void 0===e)e=function(t){for(var r=[],e=0;e<t.zzk2;e++){for(var o=0,n=0;n<t.zzj2;n++)o+=Math.pow(t.get(e,n),2)/(t.zzj2-1);r.push(Math.sqrt(o))}return r}(this);else if(!Array.isArray(e))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)/r[e])}(this,e),this;case"zz23":if(void 0===e)e=function(t){for(var r=[],e=0;e<t.zzj2;e++){for(var o=0,n=0;n<t.zzk2;n++)o+=Math.pow(t.get(n,e),2)/(t.zzk2-1);r.push(Math.sqrt(o))}return r}(this);else if(!Array.isArray(e))throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)/r[o])}(this,e),this;case void 0:if(void 0===e)e=function(t){for(var r=t.zzC1-1,e=0,o=0;o<t.zzj2;o++)for(var n=0;n<t.zzk2;n++)e+=Math.pow(t.get(n,o),2)/r;return Math.sqrt(e)}(this);else if("number"!=typeof e)throw new Error();return function(t,r){for(var e=0;e<t.zzk2;e++)for(var o=0;o<t.zzj2;o++)t.set(e,o,t.get(e,o)/r)}(this,e),this;default:throw new Error("inzyp13 option: ".concat(t))}}},{key:"toString",value:function(t){return l(this,t)}},{key:"zzC1",get:function(){return this.zzk2*this.zzj2}}],[{key:"zzD1",value:function(t,r,e){if(t*r!==e.length)throw new Error();for(var o=new R(t,r),n=0;n<t;n++)for(var s=0;s<r;s++)o.set(n,s,e[n*r+s]);return o}},{key:"zzE1",value:function(t){for(var r=new R(1,t.length),e=0;e<t.length;e++)r.set(0,e,t[e]);return r}},{key:"zzF1",value:function(t){for(var r=new R(t.length,1),e=0;e<t.length;e++)r.set(e,0,t[e]);return r}},{key:"zzG1",value:function(t,r){return new R(t,r)}},{key:"zzH1",value:function(t,r){return new R(t,r).zzL(1)}},{key:"rand",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=c(e))throw new Error();for(var o=e.random,n=void 0===o?Math.random:o,s=new R(t,r),i=0;i<t;i++)for(var a=0;a<r;a++)s.set(i,a,n());return s}},{key:"zzI1",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=c(e))throw new Error();var o=e.min,n=void 0===o?0:o,s=e.max,i=void 0===s?1e3:s,a=e.random,u=void 0===a?Math.random:a;if(!Number.isInteger(n))throw new Error();if(!Number.isInteger(i))throw new Error();if(n>=i)throw new Error();for(var h=i-n,f=new R(t,r),l=0;l<t;l++)for(var v=0;v<r;v++){var m=n+Math.round(u()*h);f.set(l,v,m)}return f}},{key:"zzJ1",value:function(t,r,e){void 0===r&&(r=t),void 0===e&&(e=1);for(var o=Math.min(t,r),n=this.zzG1(t,r),s=0;s<o;s++)n.set(s,s,e);return n}},{key:"zzo",value:function(t,r,e){var o=t.length;void 0===r&&(r=o),void 0===e&&(e=r);for(var n=Math.min(o,r,e),s=this.zzG1(r,e),i=0;i<n;i++)s.set(i,i,t[i]);return s}},{key:"min",value:function(t,r){t=this.zzL1(t),r=this.zzL1(r);for(var e=t.zzk2,o=t.zzj2,n=new R(e,o),s=0;s<e;s++)for(var i=0;i<o;i++)n.set(s,i,Math.min(t.get(s,i),r.get(s,i)));return n}},{key:"max",value:function(t,r){t=this.zzL1(t),r=this.zzL1(r);for(var e=t.zzk2,o=t.zzj2,n=new this(e,o),s=0;s<e;s++)for(var i=0;i<o;i++)n.set(s,i,Math.max(t.get(s,i),r.get(s,i)));return n}},{key:"zzL1",value:function(r){return t.zzM1(r)?r:new R(r)}},{key:"zzM1",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function S(t,r){return t-r}k.prototype.klass="Matrix","undefined"!=typeof Symbol&&(k.prototype[Symbol.for("zze3")]=function(){return l(this)}),k.random=k.rand,k.randomInt=k.zzI1,k.zzoonal=k.zzo,k.prototype.zzoonal=k.prototype.zzo,k.zzo2=k.zzJ1,k.prototype.negate=k.prototype.neg,k.prototype.zzI3=k.prototype.zzz;var R=function(t){o(e,k);var r=s(e);function e(t,o){var n;if(u(this,e),n=r.call(this),e.zzM1(t))return i(n,t.clone());if(Number.isInteger(t)&&t>=0)n.dataFlatten=new Float32Array(o*t);else{if(!Array.isArray(t))throw new Error();var s=t;if("number"!=typeof(o=(t=s.length)?s[0].length:0))n.dataFlatten=new Float32Array(s);else{n.dataFlatten=new Float32Array(o*t);for(var a=0;a<t;a++)for(var h=0;h<o;h++)n.dataFlatten[a*o+h]=s[a][h]}}return n.zzk2=t,n.zzj2=o,i(n)}return f(e,[{key:"set",value:function(t,r,e){return this.dataFlatten[t*this.zzj2+r]=e,this}},{key:"get",value:function(t,r){return this.dataFlatten[t*this.zzj2+r]}},{key:"zzn3",value:function(t,r,e){this.dataFlatten[t*this.zzj2+r]+=e}},{key:"mulComponent",value:function(t,r,e){this.dataFlatten[t*this.zzj2+r]*=e}}]),e}();!function(t,r){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)+t);return this},t.prototype.addM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)+t.get(e,o));return this},t.add=function(t,e){return new r(t).add(e)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)-t);return this},t.prototype.subM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)-t.get(e,o));return this},t.sub=function(t,e){return new r(t).sub(e)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.zzi3=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,0)},t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)*t);return this},t.prototype.mulM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)*t.get(e,o));return this},t.mul=function(t,e){return new r(t).mul(e)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)/t);return this},t.prototype.divM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)/t.get(e,o));return this},t.div=function(t,e){return new r(t).div(e)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)%t);return this},t.prototype.modM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)%t.get(e,o));return this},t.mod=function(t,e){return new r(t).mod(e)},t.prototype.zzO3=t.prototype.mod,t.prototype.zzO3S=t.prototype.modS,t.prototype.zzO3M=t.prototype.modM,t.zzO3=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)&t);return this},t.prototype.andM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)&t.get(e,o));return this},t.and=function(t,e){return new r(t).and(e)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)|t);return this},t.prototype.orM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)|t.get(e,o));return this},t.or=function(t,e){return new r(t).or(e)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)^t);return this},t.prototype.xorM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)^t.get(e,o));return this},t.xor=function(t,e){return new r(t).xor(e)},t.prototype.zzQ3=function(t){return"number"==typeof t?this.zzQ3S(t):this.zzQ3M(t)},t.prototype.zzQ3S=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)<<t);return this},t.prototype.zzQ3M=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)<<t.get(e,o));return this},t.zzQ3=function(t,e){return new r(t).zzQ3(e)},t.prototype.zzJ3=function(t){return"number"==typeof t?this.zzJ3S(t):this.zzJ3M(t)},t.prototype.zzJ3S=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)>>t);return this},t.prototype.zzJ3M=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)>>t.get(e,o));return this},t.zzJ3=function(t,e){return new r(t).zzJ3(e)},t.prototype.zzL3=function(t){return"number"==typeof t?this.zzL3S(t):this.zzL3M(t)},t.prototype.zzL3S=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,this.get(r,e)>>>t);return this},t.prototype.zzL3M=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,this.get(e,o)>>>t.get(e,o));return this},t.zzL3=function(t,e){return new r(t).zzL3(e)},t.prototype.zzK3=t.prototype.zzL3,t.prototype.zzK3S=t.prototype.zzL3S,t.prototype.zzK3M=t.prototype.zzL3M,t.zzK3=t.zzL3,t.prototype.not=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,~this.get(t,r));return this},t.not=function(t){return new r(t).not()},t.prototype.abs=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.abs(this.get(t,r)));return this},t.abs=function(t){return new r(t).abs()},t.prototype.acos=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.acos(this.get(t,r)));return this},t.acos=function(t){return new r(t).acos()},t.prototype.zzM3=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.zzM3(this.get(t,r)));return this},t.zzM3=function(t){return new r(t).zzM3()},t.prototype.asin=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.asin(this.get(t,r)));return this},t.asin=function(t){return new r(t).asin()},t.prototype.zzN3=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.zzN3(this.get(t,r)));return this},t.zzN3=function(t){return new r(t).zzN3()},t.prototype.atan=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.atan(this.get(t,r)));return this},t.atan=function(t){return new r(t).atan()},t.prototype.atanh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.atanh(this.get(t,r)));return this},t.atanh=function(t){return new r(t).atanh()},t.prototype.cbrt=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.cbrt(this.get(t,r)));return this},t.cbrt=function(t){return new r(t).cbrt()},t.prototype.ceil=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.ceil(this.get(t,r)));return this},t.ceil=function(t){return new r(t).ceil()},t.prototype.clz32=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.clz32(this.get(t,r)));return this},t.clz32=function(t){return new r(t).clz32()},t.prototype.cos=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.cos(this.get(t,r)));return this},t.cos=function(t){return new r(t).cos()},t.prototype.cosh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.cosh(this.get(t,r)));return this},t.cosh=function(t){return new r(t).cosh()},t.prototype.exp=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.exp(this.get(t,r)));return this},t.exp=function(t){return new r(t).exp()},t.prototype.expm1=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.expm1(this.get(t,r)));return this},t.expm1=function(t){return new r(t).expm1()},t.prototype.floor=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.floor(this.get(t,r)));return this},t.floor=function(t){return new r(t).floor()},t.prototype.fround=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.fround(this.get(t,r)));return this},t.fround=function(t){return new r(t).fround()},t.prototype.log=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log(this.get(t,r)));return this},t.log=function(t){return new r(t).log()},t.prototype.log1p=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log1p(this.get(t,r)));return this},t.log1p=function(t){return new r(t).log1p()},t.prototype.log10=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log10(this.get(t,r)));return this},t.log10=function(t){return new r(t).log10()},t.prototype.log2=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.log2(this.get(t,r)));return this},t.log2=function(t){return new r(t).log2()},t.prototype.round=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.round(this.get(t,r)));return this},t.round=function(t){return new r(t).round()},t.prototype.sign=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sign(this.get(t,r)));return this},t.sign=function(t){return new r(t).sign()},t.prototype.sin=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sin(this.get(t,r)));return this},t.sin=function(t){return new r(t).sin()},t.prototype.sinh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sinh(this.get(t,r)));return this},t.sinh=function(t){return new r(t).sinh()},t.prototype.sqrt=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.sqrt(this.get(t,r)));return this},t.sqrt=function(t){return new r(t).sqrt()},t.prototype.tan=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.tan(this.get(t,r)));return this},t.tan=function(t){return new r(t).tan()},t.prototype.tanh=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.tanh(this.get(t,r)));return this},t.tanh=function(t){return new r(t).tanh()},t.prototype.trunc=function(){for(var t=0;t<this.zzk2;t++)for(var r=0;r<this.zzj2;r++)this.set(t,r,Math.trunc(this.get(t,r)));return this},t.trunc=function(t){return new r(t).trunc()},t.pow=function(t,e){return new r(t).pow(e)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(var r=0;r<this.zzk2;r++)for(var e=0;e<this.zzj2;e++)this.set(r,e,Math.pow(this.get(r,e),t));return this},t.prototype.powM=function(t){if(t=r.zzL1(t),this.zzk2!==t.zzk2||this.zzj2!==t.zzj2)throw new Error();for(var e=0;e<this.zzk2;e++)for(var o=0;o<this.zzj2;o++)this.set(e,o,Math.pow(this.get(e,o),t.get(e,o)));return this}}(k,R);var E=function(t){o(e,k);var r=s(e);function e(t){var o;u(this,e),(o=r.call(this)).zzk2=t.length,o.zzj2=t[0].length,o.dataFlatten=new Float32Array(o.zzk2*o.zzj2);for(var n=0;n<o.zzk2;n++)for(var s=0;s<o.zzj2;s++)o.dataFlatten[n*o.zzj2+s]=t[n][s];return o}return f(e,[{key:"set",value:function(t,r,e){return this.dataFlatten[t*this.zzj2+r]=e,this}},{key:"get",value:function(t,r){return this.dataFlatten[t*this.zzj2+r]}}]),e}();function T(t,r){var e=0;return Math.abs(t)>Math.abs(r)?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0!==r?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):0}var A=function(){function t(r){u(this,t);var e=(r=E.zzL1(r)).zzk2,o=r.zzj2;this.QR=r.clone(),this.X=r.clone(),this.Rzzo=new Float32Array(o),this.m=e,this.n=o,this.update(r)}return f(t,[{key:"update",value:function(t){var r,e,o,n,s=this.QR,i=this.m,a=this.n,u=this.Rzzo;for(s.copy(t),o=0;o<a;o++){var h=0;for(r=o;r<i;r++)h=T(h,s.get(r,o));if(0!==h){for(s.get(o,o)<0&&(h=-h),r=o;r<i;r++)s.set(r,o,s.get(r,o)/h);for(s.set(o,o,s.get(o,o)+1),e=o+1;e<a;e++){for(n=0,r=o;r<i;r++)n+=s.get(r,o)*s.get(r,e);for(n=-n/s.get(o,o),r=o;r<i;r++)s.set(r,e,s.get(r,e)+n*s.get(r,o))}}u[o]=-h}}},{key:"solve",value:function(t){var r=this.QR,e=r.zzk2,o=t.zzj2,n=this.X;n.copy(t);var s,i,a,u,h=r.zzj2;for(a=0;a<h;a++)for(i=0;i<o;i++){for(u=0,s=a;s<e;s++)u+=r.get(s,a)*n.get(s,i);for(u=-u/r.get(a,a),s=a;s<e;s++)n.set(s,i,n.get(s,i)+u*r.get(s,a))}for(a=h-1;a>=0;a--){for(i=0;i<o;i++)n.set(a,i,n.get(a,i)/this.Rzzo[a]);for(s=0;s<a;s++)for(i=0;i<o;i++)n.set(s,i,n.get(s,i)-n.get(a,i)*r.get(s,a))}return n.zz31(0,h-1,0,o-1)}},{key:"zzY1",value:function(){for(var t=this.QR.zzj2,r=0;r<t;r++)if(0===this.Rzzo[r])return!1;return!0}},{key:"zzW1",get:function(){var t,r,e=this.QR,o=e.zzj2,n=new R(o,o);for(t=0;t<o;t++)for(r=0;r<o;r++)t<r?n.set(t,r,e.get(t,r)):t===r?n.set(t,r,this.Rzzo[t]):n.set(t,r,0);return n}},{key:"zzZ1",get:function(){var t,r,e,o,n=this.QR,s=n.zzk2,i=n.zzj2,a=new R(s,i);for(e=i-1;e>=0;e--){for(t=0;t<s;t++)a.set(t,e,0);for(a.set(e,e,1),r=e;r<i;r++)if(0!==n.get(e,e)){for(o=0,t=e;t<s;t++)o+=n.get(t,e)*a.get(t,r);for(o=-o/n.get(e,e),t=e;t<s;t++)a.set(t,r,a.get(t,r)+o*n.get(t,e))}}return a}}]),t}(),C=function(){function t(r,e){u(this,t);var o=r.zzk2,n=r.zzj2,s=Boolean(e.zzx3),i=Boolean(e.zzZ2),a=r.clone(),h=Math.min(o+1,n),f=Math.min(o,n),c=new Float32Array(h),l=new R(o,f),v=new R(n,n),m=new Float32Array(n),g=new Float32Array(o),w=new Float32Array(h),p=R.zzG1(h,h),y=R.zzG1(v.zzk2,l.zzk2),d=new R(v.zzk2,h),b=new R(v.zzk2,l.zzk2);this.m=o,this.n=n,this.ni=h,this.nu=f,this.s=c,this.si=w,this.work=g,this.e=m,this.U=l,this.V=v,this.wantu=s,this.wantv=i,this.a=a,this.Ls=p,this.VLU=y,this.X=d,this.Y=b,this.compute()}return f(t,[{key:"zz24",value:function(t){this.a.copy(t),this.U.reset(),this.V.reset(),this.compute()}},{key:"compute",value:function(){for(var t=this.m,r=this.n,e=this.ni,o=this.nu,n=this.s,s=this.si,i=this.work,a=this.e,u=this.U,h=this.V,f=this.wantu,c=this.wantv,l=this.a,v=0;v<e;v++)s[v]=v;for(var m=Math.min(t-1,r),g=Math.max(0,Math.min(r-2,t)),w=Math.max(m,g),p=0;p<w;p++){if(p<m){n[p]=0;for(var y=p;y<t;y++)n[p]=T(n[p],l.get(y,p));if(0!==n[p]){l.get(p,p)<0&&(n[p]=-n[p]);for(var d=p;d<t;d++)l.set(d,p,l.get(d,p)/n[p]);l.set(p,p,l.get(p,p)+1)}n[p]=-n[p]}for(var b=p+1;b<r;b++){if(p<m&&0!==n[p]){for(var M=0,x=p;x<t;x++)M+=l.get(x,p)*l.get(x,b);M=-M/l.get(p,p);for(var k=p;k<t;k++)l.set(k,b,l.get(k,b)+M*l.get(k,p))}a[b]=l.get(p,b)}if(f&&p<m)for(var S=p;S<t;S++)u.set(S,p,l.get(S,p));if(p<g){a[p]=0;for(var R=p+1;R<r;R++)a[p]=T(a[p],a[R]);if(0!==a[p]){a[p+1]<0&&(a[p]=0-a[p]);for(var E=p+1;E<r;E++)a[E]/=a[p];a[p+1]+=1}if(a[p]=-a[p],p+1<t&&0!==a[p]){for(var A=p+1;A<t;A++)i[A]=0;for(var C=p+1;C<t;C++)for(var I=p+1;I<r;I++)i[C]+=a[I]*l.get(C,I);for(var D=p+1;D<r;D++)for(var N=-a[D]/a[p+1],O=p+1;O<t;O++)l.set(O,D,l.get(O,D)+N*i[O])}if(c)for(var F=p+1;F<r;F++)h.set(F,p,a[F])}}var P=Math.min(r,t+1);if(m<r&&(n[m]=l.get(m,m)),t<P&&(n[P-1]=0),g+1<P&&(a[g]=l.get(g,P-1)),a[P-1]=0,f){for(var j=m;j<o;j++){for(var q=0;q<t;q++)u.set(q,j,0);u.set(j,j,1)}for(var V=m-1;V>=0;V--)if(0!==n[V]){for(var z=V+1;z<o;z++){for(var Q=0,L=V;L<t;L++)Q+=u.get(L,V)*u.get(L,z);Q=-Q/u.get(V,V);for(var B=V;B<t;B++)u.set(B,z,u.get(B,z)+Q*u.get(B,V))}for(var U=V;U<t;U++)u.set(U,V,-u.get(U,V));u.set(V,V,1+u.get(V,V));for(var _=0;_<V-1;_++)u.set(_,V,0)}else{for(var G=0;G<t;G++)u.set(G,V,0);u.set(V,V,1)}}if(c)for(var W=r-1;W>=0;W--){if(W<g&&0!==a[W])for(var X=W+1;X<r;X++){for(var Y=0,J=W+1;J<r;J++)Y+=h.get(J,W)*h.get(J,X);Y=-Y/h.get(W+1,W);for(var K=W+1;K<r;K++)h.set(K,X,h.get(K,X)+Y*h.get(K,W))}for(var H=0;H<r;H++)h.set(H,W,0);h.set(W,W,1)}for(var Z=P-1,$=Number.EPSILON;P>0;){var tt=void 0,rt=void 0;for(tt=P-2;tt>=-1&&-1!==tt;tt--){var et=Number.MIN_VALUE+$*Math.abs(n[tt]+Math.abs(n[tt+1]));if(Math.abs(a[tt])<=et||Number.isNaN(a[tt])){a[tt]=0;break}}if(tt===P-2)rt=4;else{var ot=void 0;for(ot=P-1;ot>=tt&&ot!==tt;ot--){var nt=(ot!==P?Math.abs(a[ot]):0)+(ot!==tt+1?Math.abs(a[ot-1]):0);if(Math.abs(n[ot])<=$*nt){n[ot]=0;break}}ot===tt?rt=3:ot===P-1?rt=1:(rt=2,tt=ot)}switch(tt++,rt){case 1:var st=a[P-2];a[P-2]=0;for(var it=P-2;it>=tt;it--){var at=T(n[it],st),ut=n[it]/at,ht=st/at;if(n[it]=at,it!==tt&&(st=-ht*a[it-1],a[it-1]=ut*a[it-1]),c)for(var ft=0;ft<r;ft++)at=ut*h.get(ft,it)+ht*h.get(ft,P-1),h.set(ft,P-1,-ht*h.get(ft,it)+ut*h.get(ft,P-1)),h.set(ft,it,at)}break;case 2:var ct=a[tt-1];a[tt-1]=0;for(var lt=tt;lt<P;lt++){var vt=T(n[lt],ct),mt=n[lt]/vt,gt=ct/vt;if(n[lt]=vt,ct=-gt*a[lt],a[lt]=mt*a[lt],f)for(var wt=0;wt<t;wt++)vt=mt*u.get(wt,lt)+gt*u.get(wt,tt-1),u.set(wt,tt-1,-gt*u.get(wt,lt)+mt*u.get(wt,tt-1)),u.set(wt,lt,vt)}break;case 3:var pt=Math.max(Math.abs(n[P-1]),Math.abs(n[P-2]),Math.abs(a[P-2]),Math.abs(n[tt]),Math.abs(a[tt])),yt=n[P-1]/pt,dt=n[P-2]/pt,bt=a[P-2]/pt,Mt=n[tt]/pt,xt=a[tt]/pt,kt=((dt+yt)*(dt-yt)+bt*bt)/2,St=yt*bt*(yt*bt),Rt=0;0===kt&&0===St||(Rt=St/(kt+(Rt=kt<0?0-Math.sqrt(kt*kt+St):Math.sqrt(kt*kt+St))));for(var Et=(Mt+yt)*(Mt-yt)+Rt,Tt=Mt*xt,At=tt;At<P-1;At++){var Ct=T(Et,Tt);0===Ct&&(Ct=Number.MIN_VALUE);var It=Et/Ct,Dt=Tt/Ct;if(At!==tt&&(a[At-1]=Ct),Et=It*n[At]+Dt*a[At],a[At]=It*a[At]-Dt*n[At],Tt=Dt*n[At+1],n[At+1]=It*n[At+1],c)for(var Nt=0;Nt<r;Nt++)Ct=It*h.get(Nt,At)+Dt*h.get(Nt,At+1),h.set(Nt,At+1,-Dt*h.get(Nt,At)+It*h.get(Nt,At+1)),h.set(Nt,At,Ct);if(0===(Ct=T(Et,Tt))&&(Ct=Number.MIN_VALUE),It=Et/Ct,Dt=Tt/Ct,n[At]=Ct,Et=It*a[At]+Dt*n[At+1],n[At+1]=-Dt*a[At]+It*n[At+1],Tt=Dt*a[At+1],a[At+1]=It*a[At+1],f&&At<t-1)for(var Ot=0;Ot<t;Ot++)Ct=It*u.get(Ot,At)+Dt*u.get(Ot,At+1),u.set(Ot,At+1,-Dt*u.get(Ot,At)+It*u.get(Ot,At+1)),u.set(Ot,At,Ct)}a[P-2]=Et;break;case 4:if(n[tt]<=0&&(n[tt]=n[tt]<0?-n[tt]:0,c))for(var Ft=0;Ft<=Z;Ft++)h.set(Ft,tt,-h.get(Ft,tt));for(;tt<Z&&!(n[tt]>=n[tt+1]);){var Pt=n[tt];if(n[tt]=n[tt+1],n[tt+1]=Pt,c&&tt<r-1)for(var jt=0;jt<r;jt++)Pt=h.get(jt,tt+1),h.set(jt,tt+1,h.get(jt,tt)),h.set(jt,tt,Pt);if(f&&tt<t-1)for(var qt=0;qt<t;qt++)Pt=u.get(qt,tt+1),u.set(qt,tt+1,u.get(qt,tt)),u.set(qt,tt,Pt);tt++}P--}}}},{key:"solve",value:function(t){for(var r=t,e=this.zzf1,o=this.s.length,n=this.Ls,s=this.VLU,i=0;i<o;i++)Math.abs(this.s[i])<=e?n.set(i,i,0):n.set(i,i,1/this.s[i]);for(var a=this.U,u=this.zzh1,h=u.zzr(n),f=u.zzk2,c=a.zzk2,l=0;l<f;l++)for(var v=0;v<c;v++){for(var m=0,g=0;g<o;g++)m+=h.get(l,g)*a.get(v,g);s.set(l,v,m)}return s.zzr(r)}},{key:"zza1",value:function(t){return this.solve(R.zzo(t))}},{key:"inverse",value:function(){for(var t=this.V,r=this.zzf1,e=t.zzk2,o=t.zzj2,n=this.X,s=this.Y,i=0;i<e;i++)for(var a=0;a<o;a++)Math.abs(this.s[a])>r&&n.set(i,a,t.get(i,a)/this.s[a]);for(var u=this.U,h=u.zzk2,f=u.zzj2,c=0;c<e;c++)for(var l=0;l<h;l++){for(var v=0,m=0;m<f;m++)v+=n.get(c,m)*u.get(l,m);s.set(c,l,v)}return s}},{key:"zzb1",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"zzp2",get:function(){return this.s[0]}},{key:"zzd1",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,e=this.s,o=0,n=e.length;o<n;o++)e[o]>t&&r++;return r}},{key:"zzoonal",get:function(){return Array.from(this.s)}},{key:"zzf1",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"zzg1",get:function(){return this.U}},{key:"zzh1",get:function(){return this.V}},{key:"zzoonalMatrix",get:function(){return R.zzo(this.s)}}]),t}(),I=[],D=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{zzj3:-1},e=r.zzj3;if(-1!==e&&I[e]){var o=I[e];return o.zz24(t),o}var n=new C(t,Object.assign({zzx3:!0,zzZ2:!0},r));return-1!==e&&(I[e]=n),n};function N(t,r){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return e?D(t,{zzj3:o}).solve(r):new A(t).solve(r)}var O=function(t){o(e,k);var r=s(e);function e(t,o,n){var s;return u(this,e),(s=r.call(this)).matrix=t,s.zzk2=o,s.zzj2=n,s}return e}(),F=function(t){o(e,O);var r=s(e);function e(t,o,n){var s;u(this,e);var i=y(t,o,n);return(s=r.call(this,t,i.row.length,i.zz23.length)).zzy3=i.row,s.zzl2=i.zz23,s}return f(e,[{key:"set",value:function(t,r,e){return this.matrix.set(this.zzy3[t],this.zzl2[r],e),this}},{key:"get",value:function(t,r){return this.matrix.get(this.zzy3[t],this.zzl2[r])}}]),e}();t.Matrix=R,t.QR=A,t.zzT2=A,t.zz92=D,t.default=R,t.zzU1=function t(r){if(0===r.zzj2)return 1;var e,o,n,s,i,a;if(2===r.zzj2)return e=r.get(0,0),o=r.get(0,1),n=r.get(1,0),e*r.get(1,1)-o*n;if(3===r.zzj2)return s=new F(r,[1,2],[1,2]),i=new F(r,[1,2],[0,2]),a=new F(r,[1,2],[0,1]),e=r.get(0,0),o=r.get(0,1),n=r.get(0,2),e*t(s)-o*t(i)+n*t(a);throw new Error()},t.inverse2=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2?arguments[2]:void 0;return r?D(t,{zzj3:e}).inverse():N(t,R.zzJ1(t.zzk2))},t.zzp3=N,Object.defineProperty(t,"zzB",{value:!0})},"object"==(void 0===e?"undefined":c(e))&&void 0!==r?v(e):v((l=falseThis?globalThis:l||self).mlMatrix={})},{}]},{},[2])(2)});;yb=window.zyp;a.callbackReady&&(Q.Ja=a.callbackReady);a.callbackTrack&&(Q.Pb=a.callbackTrack);"undefined"!==
typeof a.animateDelay&&(Q.Ya=a.animateDelay);"undefined"!==typeof a.NNs&&(Q.Wa=a.NNs);"undefined"!==typeof a.NNsPaths&&(Q.Xa=a.NNsPaths);"undefined"!==typeof a.maxHandsDetected&&(O.m=Math.max(1,a.maxHandsDetected));"undefined"!==typeof a.followZRot&&(Q.qa=a.followZRot);"undefined"!==typeof a.freeZRot&&(Q.Wb=a.freeZRot);"undefined"!==typeof a.isTrackingEnabled&&(Q.jc=a.isTrackingEnabled?!0:!1);if(O.m>da.Ef)return Qa("MAXHANDS_TOOHIGH"),!1;if(a.canvas)Q.Z=a.canvas;else{if(!a.canvasId)return Qa("NO_CANVASID"),
!1;Q.Z=document.getElementById(a.canvasId);if(!Q.Z)return Qa("INVALID_CANVASID"),!1}U.B=Q.Z.width;U.I=Q.Z.height;if(!U.B||!U.I)return Qa("INVALID_CANVASDIMENSIONS"),!1;U.Nb=U.B/U.I;Ta.v({Hd:!1,ha:Q.Ya});ya.v({rc:0,n:da.Lb[1]-da.Lb[0]+1,Nd:da.Lb[0]});a.scanSettings&&(Object.assign(ka,a.scanSettings),0!==ka.nDetectsPerLoop?ya.Ec(ka.nDetectsPerLoop):ya.Qc());a.stabilizationSettings&&Object.assign(pa,a.stabilizationSettings);a.videoSettings&&a.videoSettings.videoElement?Ya(a.videoSettings.videoElement,
gb):(a.videoSettings&&Object.assign(ua,a.videoSettings),C.vc=a.onWebcamAsk,C.wc=a.onWebcamGet,wb(function(b){Ya(b,gb)}));pb=ka.animateProcessOrder.indexOf("S")<ka.animateProcessOrder.indexOf("D");nb();Jb(pc);return!0},update:function(a){if(!xb)return Promise.reject("NOT_READY");a.scanSettings&&lb.set_scanSettings(a.scanSettings);a.stabilizationSettings&&lb.set_stabilizationSettings(a.stabilizationSettings);var b=Promise.resolve();if(a.NNsPaths||a.NNs){ob();fa=ca.oc;nb();ma.forEach(function(d){d.model.o()});
ma.splice(0);for(b=0;b<O.m;++b)qa[b].detected=0,qa.isDetected=!1,Oa[b].Ma=0;a.NNsPaths?Q.Xa=a.NNsPaths:a.NNs&&(Q.Wa=a.NNs);b=new Promise(function(d){Jb(function(e){Ob(e);eb();d()})})}return b},retry_cameraAccess:function(){return new Promise(function(a,b){fa!==ca.error?b("NOT_APPLICABLE"):(fa=ca.oc,wb(function(d){Ya(d,gb);a()}))})},destroy:function(){if(hb)return Promise.reject("ALREADY_DESTROYING");db=null;xb=!1;hb=!0;Ta.o();return new Promise(function(a){lb.toggle_pause(!0,!0).finally(function(){fc();
U.ra=null;ra.Va=null;ra.Gb=null;C.M=null;fa=ca.wb;hb=!1;a()}).catch(function(){})})},toggle_pause:function(a,b){if(-1===[ca.play,ca.pause].indexOf(fa))return Promise.reject("NOT_READY");var d=null;d=C.ob?Promise.resolve():b?X.he(C.element,!a,C.Ka):Promise.resolve();a?ob():d.then(function(){eb()});return d},toggle_tracking:function(a){-1!==[ca.play,ca.pause].indexOf(fa)&&(Q.jc=a)},update_videoSettings:function(a){ob();return new Promise(function(b,d){X.he(C.element,!1,C.Ka).then(function(){Object.assign(ua,
a);wb(function(e){Ya(e,function(){Ua();Xa();eb();b()})})}).catch(d)})},set_animateDelay:function(a){Q.Ya=a;Ta.update({ha:Q.Ya})},resize:function(){if(!Q||!Q.Z)return!1;var a=Q.Z.width,b=Q.Z.height;if(!vb()&&a===U.B&&b===U.I)return!1;U.B=a;U.I=b;U.Nb=U.B/U.I;A.S();ub();tb();Ua();Xa();return!0},set_inputTexture:function(a,b,d){C.H[0]=b;C.H[1]=d;C.M=Y.instance({width:b,height:d,bc:a});C.pb=!0;Ua();Db();Xa()},reset_inputTexture:function(){C.pb=!1;C.M=C.Jc;vb();Ua();Xa()},render_video:function(){xa.P();
A.set("s56");c.viewport(0,0,U.B,U.I);C.M.g(0);V.l(!0,!0)},get_videoDevices:function(a){return X.mf(a)},set_scanSettings:function(a){Object.assign(ka,a);0!==ka.nDetectsPerLoop?ya.Ec(ka.nDetectsPerLoop):ya.Qc();ub();tb()},set_stabilizationSettings:function(a){Object.assign(pa,a)},update_videoElement:function(a,b){Ya(a,function(){Nb();Ua();b&&b()})},capture_image:function(a){return Pa.af(a)},get_LMLabels:function(){return Ka.labels},get_LM:function(){return Ka.Wd},compute_pose:function(a,b,d,e){null===
db&&(Ma[0]=d,Ma[1]=e,db=new yb.zypSolver({cameraFocals:Ma,zyp15:da.$f}));if(Ma[0]!==d||Ma[1]!==e)Ma[0]=d,Ma[1]=e,db.zyp14(Ma);a=db.solve(a,b,!1);return{ok:a.zyp13,repError:a.repError,rotation:a.R,translation:a.t}}};return lb}();
if(typeof(module)!=='undefined'){module.exports=window.WEBARROCKSHAND;}
window.WEBARROCKSHAND.FAKEDOM=FAKEDOM;